"use strict";(globalThis.webpackChunkunmanic_documentation=globalThis.webpackChunkunmanic_documentation||[]).push([[4802],{21411(e,n,r){r.d(n,{A:()=>s});const s=r.p+"assets/images/unmanic-settings-workers2-0f74ebdc45add41b1ffcfd964ea4cdee.png"},28453(e,n,r){r.d(n,{R:()=>o,x:()=>a});var s=r(96540);const i={},t=s.createContext(i);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(t.Provider,{value:n},e.children)}},44360(e,n,r){r.d(n,{A:()=>s});const s=r.p+"assets/images/unmanic-settings-worker-event-order-4158ca7e9cf2cb9055811cc7f9c6ee62.png"},46926(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"configuration/workers_settings","title":"Workers","description":"Unmanic Configuration - Workers","source":"@site/docs/configuration/workers.mdx","sourceDirName":"configuration","slug":"/configuration/workers_settings","permalink":"/docs/configuration/workers_settings","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Workers","description":"Unmanic Configuration - Workers","id":"workers_settings"},"sidebar":"docs","previous":{"title":"Managing the Task List","permalink":"/docs/configuration/libraries/managing_task_list"},"next":{"title":"Plugins Overview","permalink":"/docs/configuration/plugins/overview"}}');var i=r(74848),t=r(28453);const o={title:"Workers",description:"Unmanic Configuration - Workers",id:"workers_settings"},a=void 0,c={},l=[{value:"Worker Groups",id:"worker-groups",level:2},{value:"Creating a Worker Group",id:"creating-a-worker-group",level:3},{value:"Tag Matching",id:"tag-matching",level:3},{value:"Example Use Cases",id:"example-use-cases",level:3},{value:"Worker Event Schedule",id:"worker-event-schedule",level:2},{value:"Adding an Event",id:"adding-an-event",level:3},{value:"Setting the Event Order",id:"setting-the-event-order",level:3},{value:"Example Schedule",id:"example-schedule",level:3},{value:"Cache Path",id:"cache-path",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{className:"screenshot",style:{width:"400px"},src:r(21411).A}),"\n",(0,i.jsxs)(n.p,{children:["Under the ",(0,i.jsx)(n.strong,{children:"Workers"})," section of your Unmanic settings you will find configuration options for managing worker groups, scheduling, and cache settings."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"worker-groups",children:"Worker Groups"}),"\n",(0,i.jsx)(n.p,{children:"Worker groups allow you to organize your workers and control which tasks they process using tags.\nEach group has its own worker count and can be assigned tags that determine which libraries' tasks the workers will process."}),"\n",(0,i.jsx)(n.h3,{id:"creating-a-worker-group",children:"Creating a Worker Group"}),"\n",(0,i.jsxs)(n.p,{children:["Click the ",(0,i.jsx)(n.strong,{children:"+"})," button at the bottom of the worker groups list to create a new group.\nEach worker group has the following settings:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Name"}),": A friendly name for the group (auto-generated if left blank)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Worker Count"}),": The number of concurrent workers in this group (0-12)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tags"}),": Tags used to match this group with libraries (see ",(0,i.jsx)(n.a,{href:"#tag-matching",children:"Tag Matching"})," below)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Lock"}),": Prevent accidental deletion of the group"]}),"\n"]}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsx)(n.p,{children:"For most people, there is no benefit to running more than 3-5 workers total across all groups.\nDepending on the type of tasks you carry out, you may find diminishing returns increasing this value beyond 5."}),(0,i.jsx)(n.p,{children:"It is recommended to start with one worker initially, and then increase this value slowly until you find the right balance of system resource use and task processing speed."})]}),"\n",(0,i.jsx)(n.h3,{id:"tag-matching",children:"Tag Matching"}),"\n",(0,i.jsx)(n.p,{children:"Tags create a powerful system for routing tasks to specific worker groups.\nThe matching rules are:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"If a worker group has tags"}),": Workers in that group will only pick up tasks from libraries that share at least one matching tag"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"If a worker group has no tags"}),": Workers will only pick up tasks from libraries that also have no tags"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This allows you to create specialized processing workflows. For example:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["A worker group tagged ",(0,i.jsx)(n.code,{children:"gpu"})," can process tasks only from libraries also tagged ",(0,i.jsx)(n.code,{children:"gpu"})]}),"\n",(0,i.jsxs)(n.li,{children:["A worker group tagged ",(0,i.jsx)(n.code,{children:"4k"})," and ",(0,i.jsx)(n.code,{children:"hdr"})," can handle tasks from libraries with either the ",(0,i.jsx)(n.code,{children:"4k"})," or ",(0,i.jsx)(n.code,{children:"hdr"})," tag"]}),"\n",(0,i.jsx)(n.li,{children:"An untagged worker group processes tasks from untagged libraries"}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["Library tags are configured in the library settings. See ",(0,i.jsx)(n.a,{href:"/docs/configuration/libraries/configure_libraries",children:"Configuring Libraries"})," for details."]})}),"\n",(0,i.jsx)(n.h3,{id:"example-use-cases",children:"Example Use Cases"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"GPU vs CPU Processing"})}),"\n",(0,i.jsx)(n.p,{children:"Create two worker groups:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:['Group "GPU Workers" with 2 workers and tag ',(0,i.jsx)(n.code,{children:"gpu"})]}),"\n",(0,i.jsx)(n.li,{children:'Group "CPU Workers" with 4 workers and no tags'}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Then tag libraries containing large files with ",(0,i.jsx)(n.code,{children:"gpu"})," to route them to GPU-accelerated encoding, while smaller files go to CPU workers."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Separate Processing Pipelines"})}),"\n",(0,i.jsx)(n.p,{children:"Create worker groups for different media types:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:['Group "Movies" with tag ',(0,i.jsx)(n.code,{children:"movies"})]}),"\n",(0,i.jsxs)(n.li,{children:['Group "TV Shows" with tag ',(0,i.jsx)(n.code,{children:"tv"})]}),"\n",(0,i.jsxs)(n.li,{children:['Group "Music" with tag ',(0,i.jsx)(n.code,{children:"music"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Each group can have different worker counts optimized for the typical task duration of that media type."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"worker-event-schedule",children:"Worker Event Schedule"}),"\n",(0,i.jsx)(n.p,{children:"Each worker group can have its own event schedule that modifies the state of workers at specified times."}),"\n",(0,i.jsx)(n.h3,{id:"adding-an-event",children:"Adding an Event"}),"\n",(0,i.jsx)("img",{className:"screenshot",src:r(86272).A}),"\n",(0,i.jsx)(n.p,{children:"An event is configured to trigger at a repeating time.\nIt may be configured to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Set the worker count"}),"\n",(0,i.jsx)(n.li,{children:"Pause all workers"}),"\n",(0,i.jsx)(n.li,{children:"Resume all workers"}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"Scheduling the worker count to reduce at a specified time will trigger the configuration change at that exact time.\nHowever, if all workers are currently processing tasks, the actual worker count will not reduce until the next worker becomes idle, at which point it will be terminated."})}),"\n",(0,i.jsx)(n.h3,{id:"setting-the-event-order",children:"Setting the Event Order"}),"\n",(0,i.jsx)("img",{className:"screenshot",style:{width:"400px"},src:r(44360).A}),"\n",(0,i.jsxs)(n.p,{children:["The configured worker events are executed from top to bottom. In some cases, you may wish for one event to come ",(0,i.jsx)(n.strong,{children:"after"})," another."]}),"\n",(0,i.jsx)(n.p,{children:"This can be achieved by dragging the items in the list of configured events into order that suits your needs."}),"\n",(0,i.jsx)(n.h3,{id:"example-schedule",children:"Example Schedule"}),"\n",(0,i.jsx)(n.p,{children:"To reduce system load during work hours:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Daily at 08:00"})," - Set worker count to 1"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Daily at 18:00"})," - Set worker count to 4"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Weekend at 00:00"})," - Set worker count to 6"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"cache-path",children:"Cache Path"}),"\n",(0,i.jsx)(n.p,{children:"Set the location of the cache where task files will be temporarily stored while workers are carrying out jobs on them."}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsx)(n.p,{children:"For faster processing of I/O bound tasks, such as video encoding, try setting this to a tmpfs (RAM)."}),(0,i.jsx)(n.p,{children:"However, if you do this you will need to ensure that enough RAM is available to store the average file size times the number of workers that you are running across all groups."})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},86272(e,n,r){r.d(n,{A:()=>s});const s=r.p+"assets/images/unmanic-settings-worker-event3-50bf3e205ec5ef4ca18fe9b4fae065cf.png"}}]);