"use strict";(globalThis.webpackChunkunmanic_documentation=globalThis.webpackChunkunmanic_documentation||[]).push([[1242],{28453(e,n,i){i.d(n,{R:()=>l,x:()=>d});var s=i(96540);const t={},r=s.createContext(t);function l(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(r.Provider,{value:n},e.children)}},41737(e,n,i){i.r(n),i.d(n,{assets:()=>h,contentTitle:()=>c,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>u});const s=JSON.parse('{"id":"development/writing_plugins/plugin_runner_types","title":"Plugin Runners","description":"This page outlines the various Plugin types and their","source":"@site/docs/development/writing_plugins/plugin_runner_types.mdx","sourceDirName":"development/writing_plugins","slug":"/development/writing_plugins/plugin_runner_types","permalink":"/docs/development/writing_plugins/plugin_runner_types","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Plugin Runners","id":"plugin_runner_types"},"sidebar":"docs","previous":{"title":"Accessing System Info","permalink":"/docs/development/writing_plugins/system_info"},"next":{"title":"Advanced","permalink":"/docs/development/writing_plugins/advanced_plugin_patterns"}}');var t=i(74848),r=i(28453),l=(i(96540),i(65195));const d="tableOfContentsInline_prmo";function o({toc:e,minHeadingLevel:n,maxHeadingLevel:i}){return(0,t.jsx)("div",{className:d,children:(0,t.jsx)(l.A,{toc:e,minHeadingLevel:n,maxHeadingLevel:i,className:"table-of-contents",linkClassName:null})})}const a={title:"Plugin Runners",id:"plugin_runner_types"},c=void 0,h={},u=[{value:"Library Management",id:"library-management",level:2},{value:"File Test",id:"file-test",level:3},{value:"Details:",id:"details",level:4},{value:"Executed:",id:"executed",level:4},{value:"Function:",id:"function",level:4},{value:"Provided data:",id:"provided-data",level:4},{value:"Example:",id:"example",level:4},{value:"Using shared_info",id:"using-shared_info",level:4},{value:"Worker",id:"worker",level:2},{value:"Process File",id:"process-file",level:3},{value:"Details:",id:"details-1",level:4},{value:"Executed:",id:"executed-1",level:4},{value:"Function:",id:"function-1",level:4},{value:"Provided data:",id:"provided-data-1",level:4},{value:"Example:",id:"example-1",level:4},{value:"Spawning your own child process",id:"spawning-your-own-child-process",level:6},{value:"Post-processor",id:"post-processor",level:2},{value:"File movement",id:"file-movement",level:3},{value:"Details:",id:"details-2",level:4},{value:"Executed:",id:"executed-2",level:4},{value:"Function:",id:"function-2",level:4},{value:"Provided data:",id:"provided-data-2",level:4},{value:"Example:",id:"example-2",level:4},{value:"Task Result",id:"task-result",level:3},{value:"Details:",id:"details-3",level:4},{value:"Executed:",id:"executed-3",level:4},{value:"Function:",id:"function-3",level:4},{value:"Provided data:",id:"provided-data-3",level:4},{value:"Example:",id:"example-3",level:4},{value:"Frontend",id:"frontend",level:2},{value:"Data Panel",id:"data-panel",level:3},{value:"Details:",id:"details-4",level:4},{value:"Executed:",id:"executed-4",level:4},{value:"Function:",id:"function-4",level:4},{value:"Provided data:",id:"provided-data-4",level:4},{value:"Example:",id:"example-4",level:4},{value:"Plugin API",id:"plugin-api",level:3},{value:"Details:",id:"details-5",level:4},{value:"Executed:",id:"executed-5",level:4},{value:"Function:",id:"function-5",level:4},{value:"Provided data:",id:"provided-data-5",level:4},{value:"Example:",id:"example-5",level:4},{value:"Events",id:"events",level:2},{value:"File queued",id:"file-queued",level:3},{value:"Details:",id:"details-6",level:4},{value:"Executed:",id:"executed-6",level:4},{value:"Function:",id:"function-6",level:4},{value:"Provided data:",id:"provided-data-6",level:4},{value:"Task queued",id:"task-queued",level:3},{value:"Details:",id:"details-7",level:4},{value:"Executed:",id:"executed-7",level:4},{value:"Function:",id:"function-7",level:4},{value:"Provided data:",id:"provided-data-7",level:4},{value:"Task scheduled",id:"task-scheduled",level:3},{value:"Details:",id:"details-8",level:4},{value:"Executed:",id:"executed-8",level:4},{value:"Function:",id:"function-8",level:4},{value:"Provided data:",id:"provided-data-8",level:4},{value:"Worker process started",id:"worker-process-started",level:3},{value:"Details:",id:"details-9",level:4},{value:"Executed:",id:"executed-9",level:4},{value:"Function:",id:"function-9",level:4},{value:"Provided data:",id:"provided-data-9",level:4},{value:"Worker process complete",id:"worker-process-complete",level:3},{value:"Details:",id:"details-10",level:4},{value:"Executed:",id:"executed-10",level:4},{value:"Function:",id:"function-10",level:4},{value:"Provided data:",id:"provided-data-10",level:4},{value:"Postprocessor started",id:"postprocessor-started",level:3},{value:"Details:",id:"details-11",level:4},{value:"Executed:",id:"executed-11",level:4},{value:"Function:",id:"function-11",level:4},{value:"Provided data:",id:"provided-data-11",level:4},{value:"Postprocessor complete",id:"postprocessor-complete",level:3},{value:"Details:",id:"details-12",level:4},{value:"Executed:",id:"executed-12",level:4},{value:"Function:",id:"function-12",level:4},{value:"Provided data:",id:"provided-data-12",level:4},{value:"Scan complete",id:"scan-complete",level:3},{value:"Details:",id:"details-13",level:4},{value:"Executed:",id:"executed-13",level:4},{value:"Function:",id:"function-13",level:4},{value:"Provided data:",id:"provided-data-13",level:4}];function x(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",h6:"h6",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Details:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["This page outlines the various Plugin types and their\n",(0,t.jsx)(n.a,{href:"/docs/development/writing_plugins/introduction#runners",children:(0,t.jsx)(n.strong,{children:"runners"})}),"."]}),"\n",(0,t.jsx)(o,{toc:u}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"library-management",children:"Library Management"}),"\n",(0,t.jsxs)(n.p,{children:["Library Management plugins run during scans and file tests. Use them to ",(0,t.jsx)(n.strong,{children:"decide what should be processed"})," (queue/skip), adjust priority, or annotate reasons to ignore a file. They shape the workload ",(0,t.jsx)(n.strong,{children:"before"})," any heavy processing occurs and can share small snippets of context for later runners."]}),"\n",(0,t.jsx)(n.h3,{id:"file-test",children:"File Test"}),"\n",(0,t.jsx)(n.h4,{id:"details",children:"Details:"}),"\n",(0,t.jsx)(n.p,{children:"This runner is best for adding or overriding file tests during library scans or file watch events. It allows you to decide if a file should enter the queue, adjust its priority, or append reasons why it should be skipped."}),"\n",(0,t.jsx)(n.h4,{id:"executed",children:"Executed:"}),"\n",(0,t.jsx)(n.p,{children:"After Unmanic carries out tests on a file to determine if it should be added to the task queue. Prior to returning a result of said tests."}),"\n",(0,t.jsx)(n.h4,{id:"function",children:"Function:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"on_library_management_file_test(data)"})}),"\n",(0,t.jsx)(n.h4,{id:"provided-data",children:"Provided data:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"library_id"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - The ID of the library that the current task is associated with."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"path"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - String containing the full path to the file being tested."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"issues"})})," ",(0,t.jsx)(n.em,{children:"[list]"})," - List of currently found issues for not processing the file."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"add_file_to_pending_tasks"})})," ",(0,t.jsx)(n.em,{children:"[boolean]"})," - Boolean, is the file currently marked to be added to the queue for processing."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"priority_score"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - Integer, an additional score that can be added to set the position of the new task in the task queue."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"shared_info"})})," ",(0,t.jsx)(n.em,{children:"[dictionary]"})," - Dictionary, information provided by previous plugin runners. This can be appended to for subsequent runners."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"example",children:"Example:"}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"plugin.py"}),(0,t.jsxs)(n.p,{children:["For an up-to-date example, see the ",(0,t.jsx)(n.a,{href:"https://github.com/Unmanic/unmanic-plugins/blob/examples/source/example_library_management_file_test/plugin.py",children:"Example Plugins Repo"})]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import os\n\n\ndef on_library_management_file_test(data):\n    \"\"\"\n    Runner function - enables additional actions during the library management file tests.\n    The 'data' object argument includes:\n        library_id                      - The library that the current task is associated with\n        path                            - String containing the full path to the file being tested.\n        issues                          - List of currently found issues for not processing the file.\n        add_file_to_pending_tasks       - Boolean, is the file currently marked to be added to the queue for processing.\n        priority_score                  - Integer, an additional score that can be added to set the position of the new task in the task queue.\n        shared_info                     - Dictionary, information provided by previous plugin runners. This can be appended to for subsequent runners.\n    :param data:\n    :return:\n    \"\"\"\n\n    # Get the file extension\n    file_extension = os.path.splitext(data.get('path'))[-1][1:]\n\n    # Ensure the file's extension is lowercase\n    file_extension = file_extension.lower()\n\n    # If this is flash video file, add it to pending tasks\n    if file_extension.lower() in ['flv']:\n        data['add_file_to_pending_tasks'] = True\n\n    return\n"})})]}),"\n",(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsxs)(n.p,{children:["When you fail a test, you should also update the ",(0,t.jsx)(n.code,{children:"issues"})," list provided in the ",(0,t.jsx)(n.code,{children:"data"})," dictionary."]}),(0,t.jsx)(n.p,{children:"For example:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"data['issues'].append({\n    'id':      '<PLUGIN NAME>',\n    'message': \"File should be ignored because <X>\",\n})\n"})})]}),"\n",(0,t.jsx)(n.h4,{id:"using-shared_info",children:"Using shared_info"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"shared_info"})," dictionary allows plugins to share data with subsequent plugins in the same flow. This is particularly useful for caching expensive operations like ffprobe so multiple plugins don't repeat the same work."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"How it works:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["The first plugin in the flow receives an empty ",(0,t.jsx)(n.code,{children:"shared_info"})," dict"]}),"\n",(0,t.jsxs)(n.li,{children:["That plugin can store data in ",(0,t.jsx)(n.code,{children:"shared_info"})," (e.g., ffprobe results)"]}),"\n",(0,t.jsxs)(n.li,{children:["Subsequent plugins receive the same ",(0,t.jsx)(n.code,{children:"shared_info"})," with the stored data"]}),"\n",(0,t.jsx)(n.li,{children:"Each plugin can read existing data and/or add more"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Common pattern - caching ffprobe data:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"def on_library_management_file_test(data):\n    # Check if a previous plugin already probed this file\n    if 'ffprobe' in data.get('shared_info', {}):\n        # Use the cached probe data\n        probe_data = data['shared_info']['ffprobe']\n    else:\n        # No cached data - probe the file\n        probe_data = run_ffprobe(data['path'])\n\n        # Store in shared_info for subsequent plugins\n        if 'shared_info' not in data:\n            data['shared_info'] = {}\n        data['shared_info']['ffprobe'] = probe_data\n\n    # Now use probe_data for your plugin's logic\n    # ...\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Why this matters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Running ffprobe is relatively slow (disk I/O + process spawn)"}),"\n",(0,t.jsx)(n.li,{children:"A library with 5 file test plugins would normally probe each file 5 times"}),"\n",(0,t.jsx)(n.li,{children:"With shared_info caching, the file is probed once and results are reused"}),"\n",(0,t.jsx)(n.li,{children:"This significantly speeds up library scans on large collections"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Best practices:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Always check if data exists in ",(0,t.jsx)(n.code,{children:"shared_info"})," before doing expensive operations"]}),"\n",(0,t.jsxs)(n.li,{children:["Use descriptive keys (e.g., ",(0,t.jsx)(n.code,{children:"'ffprobe'"}),", ",(0,t.jsx)(n.code,{children:"'mediainfo'"}),") to avoid collisions"]}),"\n",(0,t.jsx)(n.li,{children:"Only store serializable data (dicts, lists, strings, numbers)"}),"\n",(0,t.jsx)(n.li,{children:"Keep stored data minimal - don't cache entire file contents"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"worker",children:"Worker"}),"\n",(0,t.jsxs)(n.p,{children:["Worker plugins define ",(0,t.jsx)(n.strong,{children:"how the file is processed"}),". They typically build an ",(0,t.jsx)(n.code,{children:"exec_command"})," for Unmanic to run, or use ",(0,t.jsx)(n.code,{children:"PluginChildProcess"})," to execute Python work while streaming logs/progress to the UI. This family is the core of the pipeline where transcoding, muxing, probing, and other compute-heavy steps happen."]}),"\n",(0,t.jsx)(n.h3,{id:"process-file",children:"Process File"}),"\n",(0,t.jsx)(n.h4,{id:"details-1",children:"Details:"}),"\n",(0,t.jsxs)(n.p,{children:["This runner configures how a worker processes a file. It is typically used to build or modify the command line for transcoding, inject custom logic, or use the ",(0,t.jsx)(n.code,{children:"PluginChildProcess"})," helper to run Python code with live logs and progress updates. It\u2019s ideal for handling the actual \u201cwork\u201d stage of a task."]}),"\n",(0,t.jsx)(n.h4,{id:"executed-1",children:"Executed:"}),"\n",(0,t.jsx)(n.p,{children:"Just prior to the execution of the command subprocess within an Unmanic Worker process."}),"\n",(0,t.jsx)(n.h4,{id:"function-1",children:"Function:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"on_worker_process(data)"})}),"\n",(0,t.jsx)(n.h4,{id:"provided-data-1",children:"Provided data:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"task_id"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - A unique identifier of the task."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"worker_log"})})," ",(0,t.jsx)(n.em,{children:"[list]"})," - The log lines that are being tailed by the frontend. Can be left empty."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"library_id"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - The ID of the library that the current task is associated with."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"exec_command"})})," ",(0,t.jsx)(n.em,{children:"[list or string]"})," - A subprocess command that Unmanic should execute. Can be left empty."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"command_progress_parser"})})," ",(0,t.jsx)(n.em,{children:"[callable or None]"})," - Function, a function that Unmanic can use to parse the STDOUT of the command to collect progress stats. Can be empty."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"file_in"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - String, the source file to be processed by the command."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"file_out"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - String, the destination that the command should output (may be the same as the file_in if necessary)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"original_file_path"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - String, the absolute path to the original file."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"repeat"})})," ",(0,t.jsx)(n.em,{children:"[boolean]"})," - Boolean, should this runner be executed again once completed with the same variables."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"example-1",children:"Example:"}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"plugin.py"}),(0,t.jsxs)(n.p,{children:["For an up-to-date example, see the ",(0,t.jsx)(n.a,{href:"https://github.com/Unmanic/unmanic-plugins/blob/examples/source/custom_ffmpeg_process/plugin.py",children:"Example Plugins Repo"})]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from unmanic.libs.unplugins.settings import PluginSettings\nfrom unmanic.libs.system import System\n\n\nclass Settings(PluginSettings):\n    """\n    An object to hold a dictionary of settings accessible to the Plugin\n    class and able to be configured by users from within the Unmanic WebUI.\n\n    This class has a number of methods available to it for accessing these settings:\n\n        > get_setting(<key>)            - Fetch a single setting value. Or leave the\n                                        key argument empty and return the full dictionary.\n        > set_setting(<key>, <value>)   - Set a singe setting value.\n                                        Used by the Unmanic WebUI to save user settings.\n                                        Settings are stored on disk in order to be persistent.\n\n    """\n    settings = {\n        "Execute Command": True,\n        "Insert string into cache file name": "custom-string"\n    }\n\n\ndef on_worker_process(data):\n    """\n    Runner function - enables additional configured processing jobs during the worker stages of a task.\n\n    The \'data\' object argument includes:\n        task_id                 - Integer, unique identifier of the task.\n        worker_log              - Array, the log lines that are being tailed by the frontend. Can be left empty.\n        library_id              - Number, the library that the current task is associated with.\n        exec_command            - Array, a subprocess command that Unmanic should execute. Can be empty.\n        command_progress_parser - Function, a function that Unmanic can use to parse the STDOUT of the command to collect progress stats. Can be empty.\n        file_in                 - String, the source file to be processed by the command.\n        file_out                - String, the destination that the command should output (may be the same as the file_in if necessary).\n        original_file_path      - String, the absolute path to the original file.\n        repeat                  - Boolean, should this runner be executed again once completed with the same variables.\n\n    :param data:\n    :return:\n    """\n    settings = Settings(library_id=data.get(\'library_id\'))\n    system = System()\n    system_info = system.info()\n\n    custom_string = settings.get_setting(\'Insert string into cache file name\')\n    if custom_string:\n        tmp_file_out = os.path.splitext(data[\'file_out\'])\n        data[\'file_out\'] = "{}-{}-{}{}".format(tmp_file_out[0], custom_string, tmp_file_out[1])\n\n    if not settings.get_setting(\'Execute Command\'):\n        data[\'exec_command\'] = False\n\n\n\n    return\n'})})]}),"\n",(0,t.jsx)(n.h6,{id:"spawning-your-own-child-process",children:"Spawning your own child process"}),"\n",(0,t.jsxs)(n.p,{children:["Instead of setting ",(0,t.jsx)(n.code,{children:"exec_command"}),", a plugin may use the ",(0,t.jsx)(n.code,{children:"PluginChildProcess"}),"\nhelper to perform complex or Python-only work in a separate process while still\nintegrating with Unmanic\u2019s log tail and progress reporting."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from unmanic.libs.unplugins.child_process import PluginChildProcess\n\ndef child_work(log_queue, prog_queue):\n    # Any Python code here\n    for i in range(10):\n        # emit a UI log line:\n        log_queue.put(f"step {i}/10 completed")\n        # emit progress 0\u2013100:\n        prog_queue.put((i + 1) * 10)\n        time.sleep(1)\n\ndef on_worker_process(data):\n    # Runs child_work in its own process, returns True if exit code==0\n    proc = PluginChildProcess(plugin_id="<your_plugin_id>", data=data)\n    success = proc.run(child_work)\n'})}),"\n",(0,t.jsxs)(n.p,{children:["In this mode the ",(0,t.jsx)(n.code,{children:"PluginChildProcess"})," helper:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Spawns the child via ",(0,t.jsx)(n.code,{children:"multiprocessing.Process"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Registers its PID & start time with the worker\u2019s ",(0,t.jsx)(n.code,{children:"default_progress_parser"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Drains ",(0,t.jsx)(n.code,{children:"log_queue"})," \u2192 appends to ",(0,t.jsx)(n.code,{children:'data["worker_log"]'})," for UI tail."]}),"\n",(0,t.jsxs)(n.li,{children:["Drains ",(0,t.jsx)(n.code,{children:"prog_queue"})," \u2192 passes to ",(0,t.jsx)(n.code,{children:"command_progress_parser(line_text)"})," to update the progress bar."]}),"\n",(0,t.jsx)(n.li,{children:"Automatically unsets the child process PID on exit to reset all tracked subprocess metrics\nin the Unmanic Worker (CPU, memory, progress, etc.)."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This approach is useful when you need more control than an external command, or when your\nplugin logic is entirely in Python but you still want progress feedback and log visibility\nin the Unmanic frontend."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"post-processor",children:"Post-processor"}),"\n",(0,t.jsxs)(n.p,{children:["Post-processor plugins handle ",(0,t.jsx)(n.strong,{children:"what happens after processing"}),": moving/copying outputs, deciding whether to remove the source, and reacting to final success/failure. They\u2019re perfect for ",(0,t.jsx)(n.strong,{children:"finalization and notifications"}),"\u2014publishing results, cleaning up, or triggering follow-up workflows once outcomes are known."]}),"\n",(0,t.jsx)(n.h3,{id:"file-movement",children:"File movement"}),"\n",(0,t.jsx)(n.h4,{id:"details-2",children:"Details:"}),"\n",(0,t.jsx)(n.p,{children:"This runner is designed for controlling how completed cache files are moved or copied to their final destinations. It can be used to add extra copies, override default moves, or adjust cleanup behavior when handling finished outputs."}),"\n",(0,t.jsx)(n.h4,{id:"executed-2",children:"Executed:"}),"\n",(0,t.jsx)(n.p,{children:"Just prior to file copy operation from cached output file to source file's directory."}),"\n",(0,t.jsx)(n.h4,{id:"function-2",children:"Function:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"on_postprocessor_file_movement(data)"})}),"\n",(0,t.jsx)(n.h4,{id:"provided-data-2",children:"Provided data:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"library_id"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - The ID of the library that the current task is associated with."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"source_data"})})," ",(0,t.jsx)(n.em,{children:"[dictionary]"})," - Information about the source file for the task."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"remove_source_file"})})," ",(0,t.jsx)(n.em,{children:"[boolean]"})," - If true, tells Unmanic to remove the original source file after all copy operations are complete. (default: 'True' if file name has changed)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"copy_file"})})," ",(0,t.jsx)(n.em,{children:"[boolean]"})," - If true, tells Unmanic to run a copy operation with the returned data variables. (default: 'False')"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"file_in"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - The converted cache file to be copied by the postprocessor."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"file_out"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - The destination file that the file will be copied to."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"run_default_file_copy"})})," ",(0,t.jsx)(n.em,{children:"[boolean]"})," - If true, tells Unmanic to run the default post-process file movement. (default: 'True')"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"example-2",children:"Example:"}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"plugin.py"}),(0,t.jsxs)(n.p,{children:["For an up-to-date example, see the ",(0,t.jsx)(n.a,{href:"https://github.com/Unmanic/unmanic-plugins/blob/examples/source/example_postprocessor_file_movement/plugin.py",children:"Example Plugins Repo"})]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"def on_postprocessor_file_movement(data):\n    \"\"\"\n    Runner function - configures additional postprocessor file movements during the postprocessor stage of a task.\n\n    The 'data' object argument includes:\n        library_id              - Integer, the library that the current task is associated with.\n        source_data             - Dictionary, data pertaining to the original source file.\n        remove_source_file      - Boolean, should Unmanic remove the original source file after all copy operations are complete. (default: 'True' if file name has changed)\n        copy_file               - Boolean, should Unmanic run a copy operation with the returned data variables. (default: 'False')\n        file_in                 - String, the converted cache file to be copied by the postprocessor.\n        file_out                - String, the destination file that the file will be copied to.\n        run_default_file_copy   - Boolean, should Unmanic run the default post-process file movement. (default: 'True')\n\n    :param data:\n    :return:\n    \"\"\"\n\n    return\n"})})]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"This Plugin runner is only executed on a successfully completed task."})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"task-result",children:"Task Result"}),"\n",(0,t.jsx)(n.h4,{id:"details-3",children:"Details:"}),"\n",(0,t.jsx)(n.p,{children:"This runner fires once a task has completed and provides the overall success or failure status. It\u2019s useful for sending webhooks, writing to logs or databases, triggering notifications, or performing cleanup actions when tasks succeed or fail."}),"\n",(0,t.jsx)(n.h4,{id:"executed-3",children:"Executed:"}),"\n",(0,t.jsx)(n.p,{children:"Just prior to the task cache directory cleanup."}),"\n",(0,t.jsx)(n.h4,{id:"function-3",children:"Function:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"on_postprocessor_task_results(data)"})}),"\n",(0,t.jsx)(n.h4,{id:"provided-data-3",children:"Provided data:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"library_id"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - The ID of the library that the current task is associated with."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"task_id"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - A unique identifier of the task."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"task_type"})})," ",(0,t.jsx)(n.em,{children:"[string]"}),' - Indicates how this task is being processed ("local" or "remote").']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"final_cache_path"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - The path to the final cache file that was then used as the source for all destination files."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"task_processing_success"})})," ",(0,t.jsx)(n.em,{children:"[boolean]"})," - True if all task processes complete successfully."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"file_move_processes_success"})})," ",(0,t.jsx)(n.em,{children:"[boolean]"})," - True if all postprocessor movement tasks complete successfully."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"destination_files"})})," ",(0,t.jsx)(n.em,{children:"[list]"})," - List containing all file paths created by postprocessor file movements."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"source_data"})})," ",(0,t.jsx)(n.em,{children:"[dictionary]"})," - Information about the source file for the task."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"start_time"})})," ",(0,t.jsx)(n.em,{children:"[float]"})," - UNIX timestamp when the task began."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"finish_time"})})," ",(0,t.jsx)(n.em,{children:"[float]"})," - UNIX timestamp when the task completed."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"example-3",children:"Example:"}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"plugin.py"}),(0,t.jsxs)(n.p,{children:["For an up-to-date example, see the ",(0,t.jsx)(n.a,{href:"https://github.com/Unmanic/unmanic-plugins/blob/examples/source/example_postprocessor_task_results/plugin.py",children:"Example Plugins Repo"})]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'def on_postprocessor_task_results(data):\n    """\n    Runner function - provides a means for additional postprocessor functions based on the task success.\n\n    The \'data\' object argument includes:\n        library_id                      - The library that the current task is associated with.\n        task_id                         - Integer, unique identifier of the task.\n        task_type                       - String, "local" or "remote".\n        final_cache_path                - The path to the final cache file that was then used as the source for all destination files.\n        task_processing_success         - Boolean, did all task processes complete successfully.\n        file_move_processes_success     - Boolean, did all postprocessor movement tasks complete successfully.\n        destination_files               - List containing all file paths created by postprocessor file movements.\n        source_data                     - Dictionary containing data pertaining to the original source file.\n        start_time                      - Float, UNIX timestamp when the task began.\n        finish_time                     - Float, UNIX timestamp when the task completed.\n\n    :param data:\n    :return:\n    """\n    return\n'})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"frontend",children:"Frontend"}),"\n",(0,t.jsx)(n.p,{children:"Frontend plugins extend the web UI and API.\nUse this family to build interactive experiences or glue code between Unmanic and other tools."}),"\n",(0,t.jsx)(n.h3,{id:"data-panel",children:"Data Panel"}),"\n",(0,t.jsx)(n.h4,{id:"details-4",children:"Details:"}),"\n",(0,t.jsx)(n.p,{children:"This runner provides a custom data panel displayed in the Unmanic web UI. It\u2019s best used to present plugin-specific configuration, statistics, or interactive elements directly in the frontend."}),"\n",(0,t.jsx)(n.p,{children:"This is also useful for recording stats against your configured libraries."}),"\n",(0,t.jsxs)(n.p,{children:["Pages will be served from ",(0,t.jsx)(n.code,{children:"/unmanic/ui/data-panels?pluginId={plugin ID}"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Pages will be provided with a GET parameter either ",(0,t.jsx)(n.code,{children:"?theme=light"})," or ",(0,t.jsx)(n.code,{children:"?theme=dark"})," to assist with theme mapping with the main frontend."]}),"\n",(0,t.jsxs)(n.p,{children:["Static assets stored in the plugins ",(0,t.jsx)(n.a,{href:"/docs/development/writing_plugins/introduction#directory-static-optional",children:"static"})," directory will\nmade available via the webserver at ",(0,t.jsx)(n.code,{children:"/unmanic/panel/{plugin ID}/static/(.*)"})]}),"\n",(0,t.jsx)(n.h4,{id:"executed-4",children:"Executed:"}),"\n",(0,t.jsx)(n.p,{children:"From front-end URL"}),"\n",(0,t.jsx)(n.h4,{id:"function-4",children:"Function:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"render_frontend_panel(data)"})}),"\n",(0,t.jsx)(n.h4,{id:"provided-data-4",children:"Provided data:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"content_type"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - The content type to be set when writing back to the browser."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"content"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - The content to print to the browser."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"path"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - The path received after the '/unmanic/panel' path."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"arguments"})})," ",(0,t.jsx)(n.em,{children:"[dictionary]"})," - A dictionary of GET arguments received."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"example-4",children:"Example:"}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"plugin.py"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"def render_frontend_panel(data):\n    \"\"\"\n    Runner function - display a custom data panel in the frontend.\n\n    The 'data' object argument includes:\n        content_type                    - The content type to be set when writing back to the browser.\n        content                         - The content to print to the browser.\n        path                            - The path received after the '/unmanic/panel' path.\n        arguments                       - A dictionary of GET arguments received.\n\n    :param data:\n    :return:\n    \"\"\"\n\n    with open(os.path.abspath(os.path.join(os.path.dirname(__file__), 'static', 'index.html'))) as f:\n        content = f.read()\n        data['content'] = content.replace(\"{cache_buster}\", str(uuid.uuid4()))\n\n    return\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"plugin-api",children:"Plugin API"}),"\n",(0,t.jsx)(n.h4,{id:"details-5",children:"Details:"}),"\n",(0,t.jsx)(n.p,{children:"This runner exposes a plugin-managed REST-style endpoint. It\u2019s suited for receiving webhooks, serving JSON to the frontend, or integrating with external systems."}),"\n",(0,t.jsxs)(n.p,{children:["Pages will be served from ",(0,t.jsx)(n.code,{children:"/unmanic/plugin_api/{plugin ID}"}),"."]}),"\n",(0,t.jsx)(n.h4,{id:"executed-5",children:"Executed:"}),"\n",(0,t.jsx)(n.p,{children:"From front-end URL"}),"\n",(0,t.jsx)(n.h4,{id:"function-5",children:"Function:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"render_plugin_api(data)"})}),"\n",(0,t.jsx)(n.h4,{id:"provided-data-5",children:"Provided data:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"content_type"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - The content type to be set when writing back to the browser."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"content"})})," ",(0,t.jsx)(n.em,{children:"[dictionary]"})," - The content to print to the browser."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"status"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - The HTTP status code for the response."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"method"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - The request method."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"path"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - The path received after the '/unmanic/panel' path."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"uri"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - The request uri."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"query"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - The request query."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"arguments"})})," ",(0,t.jsx)(n.em,{children:"[dictionary]"})," - A dictionary of GET arguments received."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"body"})})," ",(0,t.jsx)(n.em,{children:"[dictionary]"})," - A dictionary of body arguments received."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"example-5",children:"Example:"}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"plugin.py"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"def render_plugin_api(data):\n    \"\"\"\n    Runner function - display a custom data panel in the frontend.\n\n    The 'data' object argument includes:\n        content_type                    - The content type to be set when writing back to the browser.\n        content                         - The content to print to the browser.\n        status                          - The HTTP status code for the response.\n        method                          - The request method.\n        path                            - The path received after the '/unmanic/panel' path.\n        uri                             - The request uri.\n        query                           - The request query.\n        arguments                       - A dictionary of GET arguments received.\n        body                            - A dictionary of body arguments received.\n\n    :param data:\n    :return:\n    \"\"\"\n\n    # Store webhook content\n    settings = Settings()\n    profile_directory = settings.get_profile_directory()\n    time_now = time.time()\n    request_body = json.loads(data.get('body', '{}'))\n    with open(os.path.join(profile_directory, 'sonarr_webhook_{}.json'.format(time_now)), 'w') as outfile:\n        json.dump(request_body, outfile, indent=2)\n\n    return\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,t.jsxs)(n.p,{children:["Events plugins emit structured data at key moments in a task\u2019s lifecycle (queueing, scheduling, worker start/finish, postprocessor start/finish, library scan complete, etc.). They\u2019re ideal for ",(0,t.jsx)(n.strong,{children:"observability and orchestration"}),": push webhooks/metrics, mirror state to dashboards, audit task flow, or trigger downstream automations. Events runners don\u2019t change how work is done; they ",(0,t.jsx)(n.strong,{children:"report"})," and enable external systems to react in real time."]}),"\n",(0,t.jsx)(n.h3,{id:"file-queued",children:"File queued"}),"\n",(0,t.jsx)(n.h4,{id:"details-6",children:"Details:"}),"\n",(0,t.jsx)(n.p,{children:"Emitted when a file passes library tests and is added to the pending queue. Useful for logging, triggering alerts, or updating external systems that monitor incoming workload."}),"\n",(0,t.jsx)(n.h4,{id:"executed-6",children:"Executed:"}),"\n",(0,t.jsx)(n.p,{children:"When a file has been tested and marked to be added to the pending task queue."}),"\n",(0,t.jsx)(n.h4,{id:"function-6",children:"Function:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"emit_file_queued(data)"})}),"\n",(0,t.jsx)(n.h4,{id:"provided-data-6",children:"Provided data:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"library_id"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - The ID of the library that the current task is associated with."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"file_path"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - The full path to the file being queued."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"priority_score"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - The priority score assigned to this task."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"issues"})})," ",(0,t.jsx)(n.em,{children:"[list]"})," - Any file issues that were raised."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"task-queued",children:"Task queued"}),"\n",(0,t.jsx)(n.h4,{id:"details-7",children:"Details:"}),"\n",(0,t.jsx)(n.p,{children:"Emitted when a task object is created and added to the execution queue. This is a good place to notify external systems that work has officially been scheduled."}),"\n",(0,t.jsx)(n.h4,{id:"executed-7",children:"Executed:"}),"\n",(0,t.jsx)(n.p,{children:"When a task is created and added to the execution queue."}),"\n",(0,t.jsx)(n.h4,{id:"function-7",children:"Function:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"emit_task_queued(data)"})}),"\n",(0,t.jsx)(n.h4,{id:"provided-data-7",children:"Provided data:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"library_id"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - The ID of the library that the current task is associated with."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"task_id"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - A unique identifier of the task."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"task_type"})})," ",(0,t.jsx)(n.em,{children:"[string]"}),' - Indicates how this task is being processed ("local" or "remote").']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"source_data"})})," ",(0,t.jsx)(n.em,{children:"[dictionary]"})," - Information about the source file for the task."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"task-scheduled",children:"Task scheduled"}),"\n",(0,t.jsx)(n.h4,{id:"details-8",children:"Details:"}),"\n",(0,t.jsx)(n.p,{children:"Emitted once a task is assigned to run locally or remotely. Useful for tracking distribution of tasks across workers or monitoring scheduling latency."}),"\n",(0,t.jsx)(n.h4,{id:"executed-8",children:"Executed:"}),"\n",(0,t.jsx)(n.p,{children:"When a task is scheduled for execution."}),"\n",(0,t.jsx)(n.h4,{id:"function-8",children:"Function:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"emit_task_scheduled(data)"})}),"\n",(0,t.jsx)(n.h4,{id:"provided-data-8",children:"Provided data:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"library_id"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - The ID of the library that the current task is associated with."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"task_id"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - A unique identifier of the task."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"task_type"})})," ",(0,t.jsx)(n.em,{children:"[string]"}),' - Indicates how this task is being processed ("local" or "remote").']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"task_schedule_type"})})," ",(0,t.jsx)(n.em,{children:"[string]"}),' - Will tell where the task was scheduled either "local" or "remote".']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"remote_installation_info"})})," ",(0,t.jsx)(n.em,{children:"[dictionary]"})," - Information about the remote installation for a given task. Empty for local tasks."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"source_data"})})," ",(0,t.jsx)(n.em,{children:"[dictionary]"})," - Information about the source file for the task."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"worker-process-started",children:"Worker process started"}),"\n",(0,t.jsx)(n.h4,{id:"details-9",children:"Details:"}),"\n",(0,t.jsx)(n.p,{children:"Emitted as soon as a worker begins processing. Use it to track active tasks, allocate monitoring resources, or update external dashboards."}),"\n",(0,t.jsx)(n.h4,{id:"executed-9",children:"Executed:"}),"\n",(0,t.jsx)(n.p,{children:"At the very start of a worker processing a task."}),"\n",(0,t.jsx)(n.h4,{id:"function-9",children:"Function:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"emit_worker_process_started(data)"})}),"\n",(0,t.jsx)(n.h4,{id:"provided-data-9",children:"Provided data:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"library_id"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - The ID of the library that the current task is associated with."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"task_type"})})," ",(0,t.jsx)(n.em,{children:"[string]"}),' - Indicates how this task is being processed ("local" or "remote").']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"original_file_path"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - String, absolute path to the original source file."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"task_cache_path"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - String, the target cache path for this task."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"worker_runners_info"})})," ",(0,t.jsx)(n.em,{children:"[dictionary]"}),' - Dict, per-runner metadata with initial status ("pending") and success (False).']}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"worker-process-complete",children:"Worker process complete"}),"\n",(0,t.jsx)(n.h4,{id:"details-10",children:"Details:"}),"\n",(0,t.jsx)(n.p,{children:"Emitted once a worker completes processing. It provides the success status, log, and metadata. Use this to record results, calculate processing times, or trigger alerts for failures."}),"\n",(0,t.jsx)(n.h4,{id:"executed-10",children:"Executed:"}),"\n",(0,t.jsx)(n.p,{children:"When a worker finishes processing a task."}),"\n",(0,t.jsx)(n.h4,{id:"function-10",children:"Function:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"emit_worker_process_complete(data)"})}),"\n",(0,t.jsx)(n.h4,{id:"provided-data-10",children:"Provided data:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"library_id"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - The ID of the library that the current task is associated with."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"task_type"})})," ",(0,t.jsx)(n.em,{children:"[string]"}),' - Indicates how this task is being processed ("local" or "remote").']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"original_file_path"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - String, absolute path to the original source file."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"final_cache_path"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - String, path to the final cache file location."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"overall_success"})})," ",(0,t.jsx)(n.em,{children:"[boolean]"})," - Boolean, True if all processing completed successfully."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"worker_runners_info"})})," ",(0,t.jsx)(n.em,{children:"[dictionary]"})," - Dict, per-runner metadata including status and success."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"worker_log"})})," ",(0,t.jsx)(n.em,{children:"[list]"})," - The log lines that are being tailed by the frontend. Can be left empty."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"postprocessor-started",children:"Postprocessor started"}),"\n",(0,t.jsx)(n.h4,{id:"details-11",children:"Details:"}),"\n",(0,t.jsx)(n.p,{children:"Emitted when the postprocessor begins handling a task. This event is useful for systems that want to track the full lifecycle from processing to file placement."}),"\n",(0,t.jsx)(n.h4,{id:"executed-11",children:"Executed:"}),"\n",(0,t.jsx)(n.p,{children:"When the post-processor picks up a task."}),"\n",(0,t.jsx)(n.h4,{id:"function-11",children:"Function:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"emit_postprocessor_started(data)"})}),"\n",(0,t.jsx)(n.h4,{id:"provided-data-11",children:"Provided data:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"library_id"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - The ID of the library that the current task is associated with."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"task_id"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - A unique identifier of the task."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"task_type"})})," ",(0,t.jsx)(n.em,{children:"[string]"}),' - Indicates how this task is being processed ("local" or "remote").']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"cache_path"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - String, path to the task\u2019s cache file."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"source_data"})})," ",(0,t.jsx)(n.em,{children:"[dictionary]"})," - Information about the source file for the task."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"postprocessor-complete",children:"Postprocessor complete"}),"\n",(0,t.jsx)(n.h4,{id:"details-12",children:"Details:"}),"\n",(0,t.jsx)(n.p,{children:"Emitted after a task has been fully processed and logged in history. It\u2019s useful for auditing, syncing results to external databases, or triggering downstream workflows."}),"\n",(0,t.jsx)(n.h4,{id:"executed-12",children:"Executed:"}),"\n",(0,t.jsx)(n.p,{children:"After a task is fully post-processed and recorded in history."}),"\n",(0,t.jsx)(n.h4,{id:"function-12",children:"Function:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"emit_postprocessor_complete(data)"})}),"\n",(0,t.jsx)(n.h4,{id:"provided-data-12",children:"Provided data:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"library_id"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - The ID of the library that the current task is associated with."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"task_id"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - A unique identifier of the task."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"task_type"})})," ",(0,t.jsx)(n.em,{children:"[string]"}),' - Indicates how this task is being processed ("local" or "remote").']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"source_data"})})," ",(0,t.jsx)(n.em,{children:"[dictionary]"})," - Information about the source file for the task."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"destination_data"})})," ",(0,t.jsx)(n.em,{children:"[dictionary]"})," - Information about the final output file after postprocessing for the task."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"task_success"})})," ",(0,t.jsx)(n.em,{children:"[boolean]"})," - True if the task succeeded."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"start_time"})})," ",(0,t.jsx)(n.em,{children:"[float]"})," - UNIX timestamp when the task began."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"finish_time"})})," ",(0,t.jsx)(n.em,{children:"[float]"})," - UNIX timestamp when the task completed."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"processed_by_worker"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - String, identifier of the worker that processed it."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"log"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - String, full text of the task log."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"scan-complete",children:"Scan complete"}),"\n",(0,t.jsx)(n.h4,{id:"details-13",children:"Details:"}),"\n",(0,t.jsx)(n.p,{children:"Emitted whenever a library scan finishes. This can be used to record scan stats, update UI elements, or notify external systems that the library is in sync."}),"\n",(0,t.jsx)(n.h4,{id:"executed-13",children:"Executed:"}),"\n",(0,t.jsx)(n.p,{children:"After a library scan completes."}),"\n",(0,t.jsx)(n.h4,{id:"function-13",children:"Function:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"emit_scan_complete(data)"})}),"\n",(0,t.jsx)(n.h4,{id:"provided-data-13",children:"Provided data:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"library_id"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - The ID of the library that the current task is associated with."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"library_name"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - String, the human-readable name of the library."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"library_path"})})," ",(0,t.jsx)(n.em,{children:"[string]"})," - String, filesystem path to the library."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"scan_start_time"})})," ",(0,t.jsx)(n.em,{children:"[float]"})," - Float, UNIX timestamp when the scan started."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"scan_end_time"})})," ",(0,t.jsx)(n.em,{children:"[float]"})," - Float, UNIX timestamp when the scan ended."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"scan_duration"})})," ",(0,t.jsx)(n.em,{children:"[float]"})," - Float, duration of the scan in seconds."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"files_scanned_count"})})," ",(0,t.jsx)(n.em,{children:"[integer]"})," - Integer, total number of files scanned."]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(x,{...e})}):x(e)}},65195(e,n,i){i.d(n,{A:()=>j});var s=i(96540),t=i(6342);function r(e){const n=e.map(e=>({...e,parentIndex:-1,children:[]})),i=Array(7).fill(-1);n.forEach((e,n)=>{const s=i.slice(2,e.level);e.parentIndex=Math.max(...s),i[e.level]=n});const s=[];return n.forEach(e=>{const{parentIndex:i,...t}=e;i>=0?n[i].children.push(t):s.push(t)}),s}function l({toc:e,minHeadingLevel:n,maxHeadingLevel:i}){return e.flatMap(e=>{const s=l({toc:e.children,minHeadingLevel:n,maxHeadingLevel:i});return function(e){return e.level>=n&&e.level<=i}(e)?[{...e,children:s}]:s})}function d(e){const n=e.getBoundingClientRect();return n.top===n.bottom?d(e.parentNode):n}function o(e,{anchorTopOffset:n}){const i=e.find(e=>d(e).top>=n);if(i){return function(e){return e.top>0&&e.bottom<window.innerHeight/2}(d(i))?i:e[e.indexOf(i)-1]??null}return e[e.length-1]??null}function a(){const e=(0,s.useRef)(0),{navbar:{hideOnScroll:n}}=(0,t.p)();return(0,s.useEffect)(()=>{e.current=n?0:document.querySelector(".navbar").clientHeight},[n]),e}function c(e){const n=(0,s.useRef)(void 0),i=a();(0,s.useEffect)(()=>{if(!e)return()=>{};const{linkClassName:s,linkActiveClassName:t,minHeadingLevel:r,maxHeadingLevel:l}=e;function d(){const e=function(e){return Array.from(document.getElementsByClassName(e))}(s),d=function({minHeadingLevel:e,maxHeadingLevel:n}){const i=[];for(let s=e;s<=n;s+=1)i.push(`h${s}.anchor`);return Array.from(document.querySelectorAll(i.join()))}({minHeadingLevel:r,maxHeadingLevel:l}),a=o(d,{anchorTopOffset:i.current}),c=e.find(e=>a&&a.id===function(e){return decodeURIComponent(e.href.substring(e.href.indexOf("#")+1))}(e));e.forEach(e=>{!function(e,i){i?(n.current&&n.current!==e&&n.current.classList.remove(t),e.classList.add(t),n.current=e):e.classList.remove(t)}(e,e===c)})}return document.addEventListener("scroll",d),document.addEventListener("resize",d),d(),()=>{document.removeEventListener("scroll",d),document.removeEventListener("resize",d)}},[e,i])}var h=i(28774),u=i(74848);function x({toc:e,className:n,linkClassName:i,isChild:s}){return e.length?(0,u.jsx)("ul",{className:s?void 0:n,children:e.map(e=>(0,u.jsxs)("li",{children:[(0,u.jsx)(h.A,{to:`#${e.id}`,className:i??void 0,dangerouslySetInnerHTML:{__html:e.value}}),(0,u.jsx)(x,{isChild:!0,toc:e.children,className:n,linkClassName:i})]},e.id))}):null}const p=s.memo(x);function j({toc:e,className:n="table-of-contents table-of-contents__left-border",linkClassName:i="table-of-contents__link",linkActiveClassName:d,minHeadingLevel:o,maxHeadingLevel:a,...h}){const x=(0,t.p)(),j=o??x.tableOfContents.minHeadingLevel,m=a??x.tableOfContents.maxHeadingLevel,g=function({toc:e,minHeadingLevel:n,maxHeadingLevel:i}){return(0,s.useMemo)(()=>l({toc:r(e),minHeadingLevel:n,maxHeadingLevel:i}),[e,n,i])}({toc:e,minHeadingLevel:j,maxHeadingLevel:m});return c((0,s.useMemo)(()=>{if(i&&d)return{linkClassName:i,linkActiveClassName:d,minHeadingLevel:j,maxHeadingLevel:m}},[i,d,j,m])),(0,u.jsx)(p,{toc:g,className:n,linkClassName:i,...h})}}}]);