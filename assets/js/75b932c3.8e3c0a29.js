"use strict";(globalThis.webpackChunkunmanic_documentation=globalThis.webpackChunkunmanic_documentation||[]).push([[8037],{25701(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>m});const o=JSON.parse('{"id":"configuration/linking/link_overview","title":"Link Overview","description":"Unmanic Configuration - Link - Overview","source":"@site/docs/configuration/linking/link_overview.mdx","sourceDirName":"configuration/linking","slug":"/configuration/linking/link_overview","permalink":"/docs/configuration/linking/link_overview","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Link Overview","description":"Unmanic Configuration - Link - Overview","id":"link_overview"},"sidebar":"docs","previous":{"title":"Configuring Plugins","permalink":"/docs/configuration/plugins/configuring_plugins"},"next":{"title":"Local Link Settings","permalink":"/docs/configuration/linking/link_local_settings"}}');var a=t(74848),i=t(28453);const r={title:"Link Overview",description:"Unmanic Configuration - Link - Overview",id:"link_overview"},s=void 0,l={},m=[{value:"How linking works",id:"how-linking-works",level:2},{value:"Remote Task flow diagram",id:"remote-task-flow-diagram",level:2},{value:"Shared library path behavior for Remote Task",id:"shared-library-path-behavior-for-remote-task",level:2}];function c(e){const n={admonition:"admonition",code:"code",h2:"h2",li:"li",mermaid:"mermaid",ol:"ol",p:"p",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"Linking lets multiple Unmanic installations cooperate so tasks can be processed across machines while keeping control in one place."}),"\n",(0,a.jsx)(n.h2,{id:"how-linking-works",children:"How linking works"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"A local installation connects to one or more remote installations."}),"\n",(0,a.jsx)(n.li,{children:"Tasks are queued on the local installation."}),"\n",(0,a.jsx)(n.li,{children:"When a remote installation is available and configured to receive tasks, tasks are assigned to it."}),"\n",(0,a.jsx)(n.li,{children:"The task is processed on the remote worker and results are returned to the local installation for post-processing."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"remote-task-flow-diagram",children:"Remote Task flow diagram"}),"\n",(0,a.jsx)("div",{className:"mermaid-sequence",children:(0,a.jsx)(n.mermaid,{value:'%%{init: {"theme":"base","themeVariables":{\n  "fontFamily":"system-ui, -apple-system, Segoe UI, sans-serif",\n  "primaryColor":"#0f172a",\n  "primaryTextColor":"#e2e8f0",\n  "primaryBorderColor":"#38bdf8",\n  "lineColor":"#94a3b8",\n  "actorBorder":"#38bdf8",\n  "actorBkg":"#111827",\n  "noteBkgColor":"#0f172a",\n  "noteBorderColor":"#38bdf8",\n  "labelBoxBkgColor":"#111827",\n  "labelBoxBorderColor":"#38bdf8"\n}}}%%\nsequenceDiagram\n  autonumber\n  box Local Installation\n    participant LocPending as Pending Task Queue\n    participant Foreman as Foreman\n    participant LocalPost as Post-processor\n    participant LinkMgr as Link manager\n  end\n  box Remote Installation\n    participant RmtAPI as Web API\n    participant RmtPending as Pending Task Queue\n    participant RmtForeman as Foreman\n    participant Worker as Worker\n    participant RmtPost as Post-processor\n  end\n\n  LocPending->>Foreman: Task ready\n  Foreman->>LinkMgr: Hand off task as remote\n  loop Periodic link heartbeat\n    LinkMgr->>RmtAPI: Probe API for availability/workers\n  end\n  LinkMgr->>RmtAPI: Create remote pending task\n  RmtAPI->>RmtPending: Register remote task\n  LinkMgr->>RmtAPI: Upload file payload\n  RmtAPI->>RmtPending: Cache file for task\n  RmtPending->>RmtForeman: Remote task ready\n  RmtForeman->>Worker: Assign task to worker\n  Worker--\x3e>RmtForeman: Task processed\n  RmtForeman->>RmtPost: Hand off for completion\n  RmtPost--\x3e>RmtAPI: Mark remote task complete without post-processing\n  loop Local status polling\n    LinkMgr->>RmtAPI: Fetch task status\n  end\n  RmtAPI--\x3e>LinkMgr: Task complete\n  LinkMgr->>RmtAPI: Download completed file + metadata\n  LinkMgr->>Foreman: Return completed task + metadata\n  Foreman->>LocalPost: Post-process task results'})}),"\n",(0,a.jsx)(n.h2,{id:"shared-library-path-behavior-for-remote-task",children:"Shared library path behavior for Remote Task"}),"\n",(0,a.jsxs)(n.p,{children:["If both installations can access the same files, the library paths must resolve to the same directory, even if the configured path strings are different on each machine. For example, a network share might be mounted as ",(0,a.jsx)(n.code,{children:"/mnt/media/library"})," on the local host and ",(0,a.jsx)(n.code,{children:"/media/library"})," on the remote host. In that case, each library points to its own local mount path, but both mounts reference the same underlying storage. When the matching file is reachable relative to the configured library path, the remote Unmanic installation reads it from the shared location instead of uploading the file through the API."]}),"\n",(0,a.jsx)("div",{className:"mermaid-sequence",children:(0,a.jsx)(n.mermaid,{value:'%%{init: {"theme":"base","themeVariables":{\n  "fontFamily":"system-ui, -apple-system, Segoe UI, sans-serif",\n  "primaryColor":"#0f172a",\n  "primaryTextColor":"#e2e8f0",\n  "primaryBorderColor":"#38bdf8",\n  "lineColor":"#94a3b8",\n  "actorBorder":"#38bdf8",\n  "actorBkg":"#111827",\n  "noteBkgColor":"#0f172a",\n  "noteBorderColor":"#38bdf8",\n  "labelBoxBkgColor":"#111827",\n  "labelBoxBorderColor":"#38bdf8"\n}}}%%\nsequenceDiagram\n  autonumber\n  box Local Installation\n    participant LocalPost as Post-processor\n    participant LinkMgr as Link manager\n  end\n  box Remote Installation\n    participant RmtAPI as Web API\n    participant RmtPending as Pending Task Queue\n    participant RmtForeman as Foreman\n    participant Worker as Worker\n    participant RmtPost as Post-processor\n  end\n  participant Mount as Shared library path\n\n  LinkMgr->>RmtAPI: Check shared library path for task\n  RmtAPI--\x3e>LinkMgr: Shared path exists\n  LinkMgr->>RmtAPI: Create remote task with relative path\n  RmtAPI->>RmtPending: Register remote task\n  RmtPending->>RmtForeman: Remote task ready\n  RmtForeman->>Worker: Assign task to worker\n  Worker->>Mount: Read file from shared path\n  Worker--\x3e>RmtForeman: Task processed\n  RmtForeman->>RmtPost: Hand off for completion\n  RmtPost--\x3e>RmtAPI: Mark remote task complete without post-processing\n  loop Local status polling\n    LinkMgr->>RmtAPI: Fetch task status\n  end\n  RmtAPI--\x3e>LinkMgr: Task complete\n  LinkMgr->>RmtAPI: Download completed file + metadata\n  LinkMgr->>LocalPost: Post-process task results'})}),"\n",(0,a.jsxs)(n.admonition,{type:"note",children:[(0,a.jsx)(n.p,{children:"For remote tasks, the remote post-processor first tries to move the final cache file into a temporary directory alongside the original source path (on the shared library path) if it is writable. If that move fails, it falls back to keeping the file in the Unmanic cache, and the local installation downloads it over HTTP."}),(0,a.jsx)(n.p,{children:"If the local installation only needs to move the processed file to replace the original, post-processing is faster."})]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},28453(e,n,t){t.d(n,{R:()=>r,x:()=>s});var o=t(96540);const a={},i=o.createContext(a);function r(e){const n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);