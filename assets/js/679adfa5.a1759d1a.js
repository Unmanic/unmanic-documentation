"use strict";(self.webpackChunkunmanic_documentation=self.webpackChunkunmanic_documentation||[]).push([[2192],{1293:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/export_config-9ec2e9ec2adbb0b39ac4e5c77f21dd7f.png"},2334:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"guides/unmanic_link_installations","title":"Linking Unmanic Installations","description":"Linking Unmanic Installations","source":"@site/docs/guides/unmanic_link_installations.md","sourceDirName":"guides","slug":"/guides/unmanic_link_installations","permalink":"/docs/guides/unmanic_link_installations","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Linking Unmanic Installations","description":"Linking Unmanic Installations","id":"unmanic_link_installations"},"sidebar":"docs","previous":{"title":"Install Unmanic - Kubernetes","permalink":"/docs/guides/unmanic_kubernetes_install"},"next":{"title":"NVIDIA Hardware Acceleration on Linux","permalink":"/docs/guides/nvidia_support_unmanic_on_linux"}}');var t=i(4848),o=i(8453);const l={title:"Linking Unmanic Installations",description:"Linking Unmanic Installations",id:"unmanic_link_installations"},r=void 0,a={},c=[{value:"Instructions",id:"instructions",level:2},{value:"Requirements",id:"requirements",level:3},{value:"Link Setup",id:"link-setup",level:3},{value:"Route Tasks with Tags",id:"route-tasks-with-tags",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.img,{src:"https://img.shields.io/badge/Difficulty-moderate-orange?style=flat",alt:"Difficulty"}),"\n",(0,t.jsx)(n.img,{src:"https://img.shields.io/badge/Setup%20Time-10%20minutes-orange?style=flat",alt:"Setup Time"}),"\n",(0,t.jsx)(n.a,{href:"https://github.com/fredrikbaberg",children:(0,t.jsx)(n.img,{src:"https://img.shields.io/badge/Original%20Author-fredrikbaberg-lightgrey?style=flat?style=plastic&logo=github",alt:"Original Author"})})]}),"\n",(0,t.jsx)(n.p,{children:"Multiple installations of Unmanic can be linked. This allows tasks to be processed in a distributed fashion."}),"\n",(0,t.jsx)(n.h2,{id:"instructions",children:"Instructions"}),"\n",(0,t.jsx)(n.h3,{id:"requirements",children:"Requirements"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["At least two installs of Unmanic:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["One install has access to the filesystem containg the media to be processed. For the purpose of this guide, we'll refer to this install as ",(0,t.jsx)(n.code,{children:"main"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["The other install will be called ",(0,t.jsx)(n.code,{children:"remote"}),". This has to be reachable from ",(0,t.jsx)(n.code,{children:"main"})," but does not require access to the files as they will transfered to and from ",(0,t.jsx)(n.code,{children:"main"})," as needed."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"link-setup",children:"Link Setup"}),"\n",(0,t.jsxs)(n.p,{children:["On ",(0,t.jsx)(n.code,{children:"main"}),", setup a ",(0,t.jsx)(n.a,{href:"/docs/configuration/libraries/adding_libraries",children:"library"}),". For the purpose of this exercise, this library will be named ",(0,t.jsx)(n.code,{children:"Guide"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Linking relies on libraries sharing a common name. Therefore, create a new library on ",(0,t.jsx)(n.code,{children:"remote"})," with the same name; in this case ",(0,t.jsx)(n.code,{children:"Guide"}),". Either export the library from ",(0,t.jsx)(n.code,{children:"main"})," then import it on ",(0,t.jsx)(n.code,{children:"remote"})," (see tip below) or set it up manually. The library on ",(0,t.jsx)(n.code,{children:"remote"}),' only needs plugins related to making changes, i.e. encoding. "Scanning" plugins, such as filter by size, are not needed.']}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"It is recommended to create a new library for this, instead of using the default library."})}),"\n",(0,t.jsxs)(n.p,{children:["On ",(0,t.jsx)(n.code,{children:"main"}),", use the plus sign to add a remote installation:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Enter the service address of ",(0,t.jsx)(n.code,{children:"remote"})," using either the IP or hostname",(0,t.jsx)(n.code,{children:". For example, "}),"192.168.1.3:8888`."]}),"\n",(0,t.jsxs)(n.li,{children:["Accept ",(0,t.jsx)(n.code,{children:"None"})," for authenication."]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.code,{children:"Add"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Click the ",(0,t.jsx)(n.code,{children:"Configure"})," icon and enable ",(0,t.jsx)(n.code,{children:"Send tasks to this installation when workers are available"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Once setup, the once grey logo should now turn blue. This indicates the remote installation is connected. The final result should look like this (as of version 0.2.4):"}),"\n",(0,t.jsx)("img",{className:"screenshot",src:i(4402).A}),"\n",(0,t.jsxs)(n.p,{children:["Pending tasks on ",(0,t.jsx)(n.code,{children:"main"})," should now be sent to ",(0,t.jsx)(n.code,{children:"remote"}),". This may take a few minutes, depending on network speed."]}),"\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsxs)(n.p,{children:["You can export the library configuration from ",(0,t.jsx)(n.code,{children:"main"})," using the export button, copy the code shown in the panel that opens."]}),(0,t.jsx)("img",{className:"screenshot",src:i(1293).A}),(0,t.jsxs)(n.p,{children:["You can then use import on ",(0,t.jsx)(n.code,{children:"remote"})," to paste the code."]}),(0,t.jsx)("img",{className:"screenshot",src:i(2559).A})]}),"\n",(0,t.jsx)(n.h3,{id:"route-tasks-with-tags",children:"Route Tasks with Tags"}),"\n",(0,t.jsx)(n.p,{children:"At this point, this documentation makes the following assumptions about the existing setup thus far:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["2 installations of Unmanic exist on the network; ",(0,t.jsx)(n.code,{children:"main"})," and ",(0,t.jsx)(n.code,{children:"remote"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Both installations are connected via ",(0,t.jsx)(n.code,{children:"Link"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Each installation has 1 library setup.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The library on ",(0,t.jsx)(n.code,{children:"main"})," has either ",(0,t.jsx)(n.code,{children:"File Monitor"}),", and/or ",(0,t.jsx)(n.code,{children:"Library scanner"})," enabled (based upon the needs of the reader)."]}),"\n",(0,t.jsxs)(n.li,{children:["The library on ",(0,t.jsx)(n.code,{children:"remote"})," has both ",(0,t.jsx)(n.code,{children:"File Monitor"})," and ",(0,t.jsx)(n.code,{children:"Libary scanner"})," disabled."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["For the purposes of this exercise, our objective now is to ensure all work is sent exclusively to ",(0,t.jsx)(n.code,{children:"remote"}),". In order to create this pipeline, proceed as follows:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Add a tag to the library on ",(0,t.jsx)(n.code,{children:"main"}),". We'll use the string \"work\" with no quotes. Remember to hit the Enter key after typing the string or the tag won't persist."]}),"\n",(0,t.jsxs)(n.li,{children:["Add the same tag to the library on ",(0,t.jsx)(n.code,{children:"remote"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Add the same tag to the worker on ",(0,t.jsx)(n.code,{children:"remote"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Ensure this tag is not present on ",(0,t.jsx)(n.code,{children:"main's"})," worker."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"With this setup in place, the work flow operates as follows:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The library on ",(0,t.jsx)(n.code,{children:"main"})," will be used to initiate all pending task (based on scans or file monitoring)."]}),"\n",(0,t.jsx)(n.li,{children:"Each task will be sent to any linked worker with a matching tag."}),"\n",(0,t.jsx)(n.li,{children:"Once the file associated with the task is tranferred to a valid worker, it will be processed according to the libary found to have a matching tag."}),"\n",(0,t.jsxs)(n.li,{children:["Once processing is complete, the file will be tranferred back to ",(0,t.jsx)(n.code,{children:"main"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["In all cases where greater insight is needed (troubleshooting, etc), each Unmanic installation can have ",(0,t.jsx)(n.code,{children:"EnableDebugging"})," toggled in the ",(0,t.jsx)(n.code,{children:"Logs"})," section of the ",(0,t.jsx)(n.code,{children:"Help & Support"})," page."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},2559:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/import_config-14b96ba794daac45fb156c146e05caed.png"},4402:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/remote_connected-0a0c01e0b7f2c900b4eae79e6a8e9e3f.png"},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>r});var s=i(6540);const t={},o=s.createContext(t);function l(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);