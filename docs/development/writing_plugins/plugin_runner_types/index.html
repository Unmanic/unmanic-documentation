<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-development/writing_plugins/plugin_runner_types" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Plugin Runners | Unmanic</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="http://docs.unmanic.app/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="http://docs.unmanic.app/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="http://docs.unmanic.app/docs/development/writing_plugins/plugin_runner_types"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Plugin Runners | Unmanic"><meta data-rh="true" name="description" content="This page outlines the various Plugin types and their"><meta data-rh="true" property="og:description" content="This page outlines the various Plugin types and their"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://docs.unmanic.app/docs/development/writing_plugins/plugin_runner_types"><link data-rh="true" rel="alternate" href="http://docs.unmanic.app/docs/development/writing_plugins/plugin_runner_types" hreflang="en"><link data-rh="true" rel="alternate" href="http://docs.unmanic.app/docs/development/writing_plugins/plugin_runner_types" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.d754315a.css">
<script src="/assets/js/runtime~main.1eb8af99.js" defer="defer"></script>
<script src="/assets/js/main.64126a70.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/icon.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/icon.png" alt="Unmanic Icon" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/icon.png" alt="Unmanic Icon" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Unmanic - Library Optimiser</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/stats/">Stats</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/Unmanic" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/">Welcome</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/requirements">Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/dashboard/pending_tasks">Using Unmanic</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/development/developing_plugins">Development</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/development/developing_plugins">Plugins</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/developing_plugins">Plugin Development Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/development/writing_plugins/introduction">Writing Plugins</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/writing_plugins/introduction">Introduction to Writing Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/writing_plugins/creating_a_new_plugin">Creating a New Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/writing_plugins/plugin_settings">Accessing Plugin Settings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/writing_plugins/system_info">Accessing System Info</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/development/writing_plugins/plugin_runner_types">Plugin Runners</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/development/plugin_repos/creating_your_own_repo">Plugin Repositories</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/plugin_manager_cli">Plugin Manager CLI</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/advanced/hardware_accelerated_encoding_vaapi">Advanced</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/guides/unmanic_windows_install">Guides</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Plugin Runners</h1></header><p>This page outlines the various Plugin types and their
<a href="/docs/development/writing_plugins/introduction#runners"><strong>runners</strong></a>.</p>
<div class="tableOfContentsInline_prmo"><ul class="table-of-contents"><li><a href="#library-management">Library Management</a><ul><li><a href="#file-test">File Test</a></li></ul></li><li><a href="#worker">Worker</a><ul><li><a href="#process-file">Process File</a></li></ul></li><li><a href="#post-processor">Post-processor</a><ul><li><a href="#file-movement">File movement</a></li><li><a href="#task-result">Task Result</a></li></ul></li><li><a href="#frontend">Frontend</a><ul><li><a href="#data-panel">Data Panel</a></li><li><a href="#plugin-api">Plugin API</a></li></ul></li><li><a href="#events">Events</a><ul><li><a href="#file-queued">File queued</a></li><li><a href="#task-queued">Task queued</a></li><li><a href="#task-scheduled">Task scheduled</a></li><li><a href="#worker-process-started">Worker process started</a></li><li><a href="#worker-process-complete">Worker process complete</a></li><li><a href="#postprocessor-started">Postprocessor started</a></li><li><a href="#postprocessor-complete">Postprocessor complete</a></li><li><a href="#scan-complete">Scan complete</a></li></ul></li></ul></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="library-management">Library Management<a href="#library-management" class="hash-link" aria-label="Direct link to Library Management" title="Direct link to Library Management">​</a></h2>
<p>Library Management plugins run during scans and file tests. Use them to <strong>decide what should be processed</strong> (queue/skip), adjust priority, or annotate reasons to ignore a file. They shape the workload <strong>before</strong> any heavy processing occurs and can share small snippets of context for later runners.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="file-test">File Test<a href="#file-test" class="hash-link" aria-label="Direct link to File Test" title="Direct link to File Test">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="details">Details:<a href="#details" class="hash-link" aria-label="Direct link to Details:" title="Direct link to Details:">​</a></h4>
<p>This runner is best for adding or overriding file tests during library scans or file watch events. It allows you to decide if a file should enter the queue, adjust its priority, or append reasons why it should be skipped.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="executed">Executed:<a href="#executed" class="hash-link" aria-label="Direct link to Executed:" title="Direct link to Executed:">​</a></h4>
<p>After Unmanic carries out tests on a file to determine if it should be added to the task queue. Prior to returning a result of said tests.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="function">Function:<a href="#function" class="hash-link" aria-label="Direct link to Function:" title="Direct link to Function:">​</a></h4>
<p><code>on_library_management_file_test(data)</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="provided-data">Provided data:<a href="#provided-data" class="hash-link" aria-label="Direct link to Provided data:" title="Direct link to Provided data:">​</a></h4>
<ul>
<li><strong><code>library_id</code></strong> <em>[integer]</em> - The ID of the library that the current task is associated with.</li>
<li><strong><code>path</code></strong> <em>[string]</em> - String containing the full path to the file being tested.</li>
<li><strong><code>issues</code></strong> <em>[list]</em> - List of currently found issues for not processing the file.</li>
<li><strong><code>add_file_to_pending_tasks</code></strong> <em>[boolean]</em> - Boolean, is the file currently marked to be added to the queue for processing.</li>
<li><strong><code>priority_score</code></strong> <em>[integer]</em> - Integer, an additional score that can be added to set the position of the new task in the task queue.</li>
<li><strong><code>shared_info</code></strong> <em>[dictionary]</em> - Dictionary, information provided by previous plugin runners. This can be appended to for subsequent runners.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example:<a href="#example" class="hash-link" aria-label="Direct link to Example:" title="Direct link to Example:">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>plugin.py</summary><div><div class="collapsibleContent_i85q"><p>For an up-to-date example, see the <a href="https://github.com/Unmanic/unmanic-plugins/blob/examples/source/example_library_management_file_test/plugin.py" target="_blank" rel="noopener noreferrer">Example Plugins Repo</a></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">on_library_management_file_test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Runner function - enables additional actions during the library management file tests.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    The &#x27;data&#x27; object argument includes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        library_id                      - The library that the current task is associated with</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        path                            - String containing the full path to the file being tested.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        issues                          - List of currently found issues for not processing the file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        add_file_to_pending_tasks       - Boolean, is the file currently marked to be added to the queue for processing.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        priority_score                  - Integer, an additional score that can be added to set the position of the new task in the task queue.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        shared_info                     - Dictionary, information provided by previous plugin runners. This can be appended to for subsequent runners.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    :param data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    :return:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Get the file extension</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    file_extension </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">splitext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;path&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Ensure the file&#x27;s extension is lowercase</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    file_extension </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> file_extension</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lower</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># If this is flash video file, add it to pending tasks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> file_extension</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lower</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;flv&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;add_file_to_pending_tasks&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><br></span></code></pre></div></div></div></div></details>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>When you fail a test, you should also update the <code>issues</code> list provided in the <code>data</code> dictionary.</p><p>For example:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;issues&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;id&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">      </span><span class="token string" style="color:#e3116c">&#x27;&lt;PLUGIN NAME&gt;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;message&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;File should be ignored because &lt;X&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="worker">Worker<a href="#worker" class="hash-link" aria-label="Direct link to Worker" title="Direct link to Worker">​</a></h2>
<p>Worker plugins define <strong>how the file is processed</strong>. They typically build an <code>exec_command</code> for Unmanic to run, or use <code>PluginChildProcess</code> to execute Python work while streaming logs/progress to the UI. This family is the core of the pipeline where transcoding, muxing, probing, and other compute-heavy steps happen.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="process-file">Process File<a href="#process-file" class="hash-link" aria-label="Direct link to Process File" title="Direct link to Process File">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="details-1">Details:<a href="#details-1" class="hash-link" aria-label="Direct link to Details:" title="Direct link to Details:">​</a></h4>
<p>This runner configures how a worker processes a file. It is typically used to build or modify the command line for transcoding, inject custom logic, or use the <code>PluginChildProcess</code> helper to run Python code with live logs and progress updates. It’s ideal for handling the actual “work” stage of a task.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="executed-1">Executed:<a href="#executed-1" class="hash-link" aria-label="Direct link to Executed:" title="Direct link to Executed:">​</a></h4>
<p>Just prior to the execution of the command subprocess within an Unmanic Worker process.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-1">Function:<a href="#function-1" class="hash-link" aria-label="Direct link to Function:" title="Direct link to Function:">​</a></h4>
<p><code>on_worker_process(data)</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="provided-data-1">Provided data:<a href="#provided-data-1" class="hash-link" aria-label="Direct link to Provided data:" title="Direct link to Provided data:">​</a></h4>
<ul>
<li><strong><code>task_id</code></strong> <em>[integer]</em> - A unique identifier of the task.</li>
<li><strong><code>worker_log</code></strong> <em>[list]</em> - The log lines that are being tailed by the frontend. Can be left empty.</li>
<li><strong><code>library_id</code></strong> <em>[integer]</em> - The ID of the library that the current task is associated with.</li>
<li><strong><code>exec_command</code></strong> <em>[list or string]</em> - A subprocess command that Unmanic should execute. Can be left empty.</li>
<li><strong><code>command_progress_parser</code></strong> <em>[callable or None]</em> - Function, a function that Unmanic can use to parse the STDOUT of the command to collect progress stats. Can be empty.</li>
<li><strong><code>file_in</code></strong> <em>[string]</em> - String, the source file to be processed by the command.</li>
<li><strong><code>file_out</code></strong> <em>[string]</em> - String, the destination that the command should output (may be the same as the file_in if necessary).</li>
<li><strong><code>original_file_path</code></strong> <em>[string]</em> - String, the absolute path to the original file.</li>
<li><strong><code>repeat</code></strong> <em>[boolean]</em> - Boolean, should this runner be executed again once completed with the same variables.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-1">Example:<a href="#example-1" class="hash-link" aria-label="Direct link to Example:" title="Direct link to Example:">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>plugin.py</summary><div><div class="collapsibleContent_i85q"><p>For an up-to-date example, see the <a href="https://github.com/Unmanic/unmanic-plugins/blob/examples/source/custom_ffmpeg_process/plugin.py" target="_blank" rel="noopener noreferrer">Example Plugins Repo</a></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> unmanic</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">libs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unplugins</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">settings </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> PluginSettings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> unmanic</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">libs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">system </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> System</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Settings</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PluginSettings</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    An object to hold a dictionary of settings accessible to the Plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    class and able to be configured by users from within the Unmanic WebUI.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    This class has a number of methods available to it for accessing these settings:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &gt; get_setting(&lt;key&gt;)            - Fetch a single setting value. Or leave the</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">                                        key argument empty and return the full dictionary.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &gt; set_setting(&lt;key&gt;, &lt;value&gt;)   - Set a singe setting value.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">                                        Used by the Unmanic WebUI to save user settings.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">                                        Settings are stored on disk in order to be persistent.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    settings </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;Execute Command&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;Insert string into cache file name&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;custom-string&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">on_worker_process</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Runner function - enables additional configured processing jobs during the worker stages of a task.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    The &#x27;data&#x27; object argument includes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        task_id                 - Integer, unique identifier of the task.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        worker_log              - Array, the log lines that are being tailed by the frontend. Can be left empty.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        library_id              - Number, the library that the current task is associated with.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        exec_command            - Array, a subprocess command that Unmanic should execute. Can be empty.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        command_progress_parser - Function, a function that Unmanic can use to parse the STDOUT of the command to collect progress stats. Can be empty.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        file_in                 - String, the source file to be processed by the command.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        file_out                - String, the destination that the command should output (may be the same as the file_in if necessary).</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        original_file_path      - String, the absolute path to the original file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        repeat                  - Boolean, should this runner be executed again once completed with the same variables.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    :param data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    :return:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    settings </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Settings</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">library_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;library_id&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    system </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> System</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    system_info </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> system</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    custom_string </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_setting</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Insert string into cache file name&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> custom_string</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tmp_file_out </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">splitext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;file_out&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;file_out&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{}-{}-{}{}&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tmp_file_out</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> custom_string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tmp_file_out</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_setting</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Execute Command&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;exec_command&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><br></span></code></pre></div></div></div></div></details>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="spawning-your-own-child-process">Spawning your own child process<a href="#spawning-your-own-child-process" class="hash-link" aria-label="Direct link to Spawning your own child process" title="Direct link to Spawning your own child process">​</a></h6>
<p>Instead of setting <code>exec_command</code>, a plugin may use the <code>PluginChildProcess</code>
helper to perform complex or Python-only work in a separate process while still
integrating with Unmanic’s log tail and progress reporting.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> unmanic</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">libs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unplugins</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">child_process </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> PluginChildProcess</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">proc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PluginChildProcess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plugin_id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&lt;your_plugin_id&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">child_work</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">log_queue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> prog_queue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Any Python code here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># emit a UI log line:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log_queue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;step </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">i</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">/10 completed&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># emit progress 0–100:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        prog_queue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Runs child_work in its own process, returns True if exit code==0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">success </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> proc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">child_work</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>In this mode the <code>PluginChildProcess</code> helper:</p>
<ol>
<li>Spawns the child via <code>multiprocessing.Process</code>.</li>
<li>Registers its PID &amp; start time with the worker’s <code>default_progress_parser</code>.</li>
<li>Drains <code>log_queue</code> → appends to <code>data[&quot;worker_log&quot;]</code> for UI tail.</li>
<li>Drains <code>prog_queue</code> → passes to <code>command_progress_parser(line_text)</code> to update the progress bar.</li>
<li>Automatically unsets the child process PID on exit to reset all tracked subprocess metrics
in the Unmanic Worker (CPU, memory, progress, etc.).</li>
</ol>
<p>This approach is useful when you need more control than an external command, or when your
plugin logic is entirely in Python but you still want progress feedback and log visibility
in the Unmanic frontend.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="post-processor">Post-processor<a href="#post-processor" class="hash-link" aria-label="Direct link to Post-processor" title="Direct link to Post-processor">​</a></h2>
<p>Post-processor plugins handle <strong>what happens after processing</strong>: moving/copying outputs, deciding whether to remove the source, and reacting to final success/failure. They’re perfect for <strong>finalization and notifications</strong>—publishing results, cleaning up, or triggering follow-up workflows once outcomes are known.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="file-movement">File movement<a href="#file-movement" class="hash-link" aria-label="Direct link to File movement" title="Direct link to File movement">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="details-2">Details:<a href="#details-2" class="hash-link" aria-label="Direct link to Details:" title="Direct link to Details:">​</a></h4>
<p>This runner is designed for controlling how completed cache files are moved or copied to their final destinations. It can be used to add extra copies, override default moves, or adjust cleanup behavior when handling finished outputs.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="executed-2">Executed:<a href="#executed-2" class="hash-link" aria-label="Direct link to Executed:" title="Direct link to Executed:">​</a></h4>
<p>Just prior to file copy operation from cached output file to source file&#x27;s directory.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-2">Function:<a href="#function-2" class="hash-link" aria-label="Direct link to Function:" title="Direct link to Function:">​</a></h4>
<p><code>on_postprocessor_file_movement(data)</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="provided-data-2">Provided data:<a href="#provided-data-2" class="hash-link" aria-label="Direct link to Provided data:" title="Direct link to Provided data:">​</a></h4>
<ul>
<li><strong><code>library_id</code></strong> <em>[integer]</em> - The ID of the library that the current task is associated with.</li>
<li><strong><code>source_data</code></strong> <em>[dictionary]</em> - Information about the source file for the task.</li>
<li><strong><code>remove_source_file</code></strong> <em>[boolean]</em> - If true, tells Unmanic to remove the original source file after all copy operations are complete. (default: &#x27;True&#x27; if file name has changed)</li>
<li><strong><code>copy_file</code></strong> <em>[boolean]</em> - If true, tells Unmanic to run a copy operation with the returned data variables. (default: &#x27;False&#x27;)</li>
<li><strong><code>file_in</code></strong> <em>[string]</em> - The converted cache file to be copied by the postprocessor.</li>
<li><strong><code>file_out</code></strong> <em>[string]</em> - The destination file that the file will be copied to.</li>
<li><strong><code>run_default_file_copy</code></strong> <em>[boolean]</em> - If true, tells Unmanic to run the default post-process file movement. (default: &#x27;True&#x27;)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-2">Example:<a href="#example-2" class="hash-link" aria-label="Direct link to Example:" title="Direct link to Example:">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>plugin.py</summary><div><div class="collapsibleContent_i85q"><p>For an up-to-date example, see the <a href="https://github.com/Unmanic/unmanic-plugins/blob/examples/source/example_postprocessor_file_movement/plugin.py" target="_blank" rel="noopener noreferrer">Example Plugins Repo</a></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">on_postprocessor_file_movement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Runner function - configures additional postprocessor file movements during the postprocessor stage of a task.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    The &#x27;data&#x27; object argument includes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        library_id              - Integer, the library that the current task is associated with.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        source_data             - Dictionary, data pertaining to the original source file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        remove_source_file      - Boolean, should Unmanic remove the original source file after all copy operations are complete. (default: &#x27;True&#x27; if file name has changed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        copy_file               - Boolean, should Unmanic run a copy operation with the returned data variables. (default: &#x27;False&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        file_in                 - String, the converted cache file to be copied by the postprocessor.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        file_out                - String, the destination file that the file will be copied to.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        run_default_file_copy   - Boolean, should Unmanic run the default post-process file movement. (default: &#x27;True&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    :param data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    :return:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><br></span></code></pre></div></div></div></div></details>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>This Plugin runner is only executed on a successfully completed task.</p></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-result">Task Result<a href="#task-result" class="hash-link" aria-label="Direct link to Task Result" title="Direct link to Task Result">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="details-3">Details:<a href="#details-3" class="hash-link" aria-label="Direct link to Details:" title="Direct link to Details:">​</a></h4>
<p>This runner fires once a task has completed and provides the overall success or failure status. It’s useful for sending webhooks, writing to logs or databases, triggering notifications, or performing cleanup actions when tasks succeed or fail.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="executed-3">Executed:<a href="#executed-3" class="hash-link" aria-label="Direct link to Executed:" title="Direct link to Executed:">​</a></h4>
<p>Just prior to the task cache directory cleanup.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-3">Function:<a href="#function-3" class="hash-link" aria-label="Direct link to Function:" title="Direct link to Function:">​</a></h4>
<p><code>on_postprocessor_task_results(data)</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="provided-data-3">Provided data:<a href="#provided-data-3" class="hash-link" aria-label="Direct link to Provided data:" title="Direct link to Provided data:">​</a></h4>
<ul>
<li><strong><code>library_id</code></strong> <em>[integer]</em> - The ID of the library that the current task is associated with.</li>
<li><strong><code>task_id</code></strong> <em>[integer]</em> - A unique identifier of the task.</li>
<li><strong><code>task_type</code></strong> <em>[string]</em> - Indicates how this task is being processed (&quot;local&quot; or &quot;remote&quot;).</li>
<li><strong><code>final_cache_path</code></strong> <em>[string]</em> - The path to the final cache file that was then used as the source for all destination files.</li>
<li><strong><code>task_processing_success</code></strong> <em>[boolean]</em> - True if all task processes complete successfully.</li>
<li><strong><code>file_move_processes_success</code></strong> <em>[boolean]</em> - True if all postprocessor movement tasks complete successfully.</li>
<li><strong><code>destination_files</code></strong> <em>[list]</em> - List containing all file paths created by postprocessor file movements.</li>
<li><strong><code>source_data</code></strong> <em>[dictionary]</em> - Information about the source file for the task.</li>
<li><strong><code>start_time</code></strong> <em>[float]</em> - UNIX timestamp when the task began.</li>
<li><strong><code>finish_time</code></strong> <em>[float]</em> - UNIX timestamp when the task completed.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-3">Example:<a href="#example-3" class="hash-link" aria-label="Direct link to Example:" title="Direct link to Example:">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>plugin.py</summary><div><div class="collapsibleContent_i85q"><p>For an up-to-date example, see the <a href="https://github.com/Unmanic/unmanic-plugins/blob/examples/source/example_postprocessor_task_results/plugin.py" target="_blank" rel="noopener noreferrer">Example Plugins Repo</a></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">on_postprocessor_task_results</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Runner function - provides a means for additional postprocessor functions based on the task success.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    The &#x27;data&#x27; object argument includes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        library_id                      - The library that the current task is associated with.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        task_id                         - Integer, unique identifier of the task.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        task_type                       - String, &quot;local&quot; or &quot;remote&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        final_cache_path                - The path to the final cache file that was then used as the source for all destination files.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        task_processing_success         - Boolean, did all task processes complete successfully.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        file_move_processes_success     - Boolean, did all postprocessor movement tasks complete successfully.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        destination_files               - List containing all file paths created by postprocessor file movements.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        source_data                     - Dictionary containing data pertaining to the original source file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        start_time                      - Float, UNIX timestamp when the task began.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        finish_time                     - Float, UNIX timestamp when the task completed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    :param data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    :return:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><br></span></code></pre></div></div></div></div></details>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="frontend">Frontend<a href="#frontend" class="hash-link" aria-label="Direct link to Frontend" title="Direct link to Frontend">​</a></h2>
<p>Frontend plugins extend the web UI and API.
Use this family to build interactive experiences or glue code between Unmanic and other tools.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-panel">Data Panel<a href="#data-panel" class="hash-link" aria-label="Direct link to Data Panel" title="Direct link to Data Panel">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="details-4">Details:<a href="#details-4" class="hash-link" aria-label="Direct link to Details:" title="Direct link to Details:">​</a></h4>
<p>This runner provides a custom data panel displayed in the Unmanic web UI. It’s best used to present plugin-specific configuration, statistics, or interactive elements directly in the frontend.</p>
<p>This is also useful for recording stats against your configured libraries.</p>
<p>Pages will be served from <code>/unmanic/ui/data-panels?pluginId={plugin ID}</code>.</p>
<p>Pages will be provided with a GET parameter either <code>?theme=light</code> or <code>?theme=dark</code> to assist with theme mapping with the main frontend.</p>
<p>Static assets stored in the plugins <a href="/docs/development/writing_plugins/introduction#directory-static-optional">static</a> directory will
made available via the webserver at <code>/unmanic/panel/{plugin ID}/static/(.*)</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="executed-4">Executed:<a href="#executed-4" class="hash-link" aria-label="Direct link to Executed:" title="Direct link to Executed:">​</a></h4>
<p>From front-end URL</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-4">Function:<a href="#function-4" class="hash-link" aria-label="Direct link to Function:" title="Direct link to Function:">​</a></h4>
<p><code>render_frontend_panel(data)</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="provided-data-4">Provided data:<a href="#provided-data-4" class="hash-link" aria-label="Direct link to Provided data:" title="Direct link to Provided data:">​</a></h4>
<ul>
<li><strong><code>content_type</code></strong> <em>[string]</em> - The content type to be set when writing back to the browser.</li>
<li><strong><code>content</code></strong> <em>[string]</em> - The content to print to the browser.</li>
<li><strong><code>path</code></strong> <em>[string]</em> - The path received after the &#x27;/unmanic/panel&#x27; path.</li>
<li><strong><code>arguments</code></strong> <em>[dictionary]</em> - A dictionary of GET arguments received.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-4">Example:<a href="#example-4" class="hash-link" aria-label="Direct link to Example:" title="Direct link to Example:">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>plugin.py</summary><div><div class="collapsibleContent_i85q"><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render_frontend_panel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Runner function - display a custom data panel in the frontend.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    The &#x27;data&#x27; object argument includes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        content_type                    - The content type to be set when writing back to the browser.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        content                         - The content to print to the browser.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        path                            - The path received after the &#x27;/unmanic/panel&#x27; path.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        arguments                       - A dictionary of GET arguments received.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    :param data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    :return:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> </span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">abspath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dirname</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__file__</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;static&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;index.html&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        content </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;content&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> content</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;{cache_buster}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uuid</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">uuid4</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><br></span></code></pre></div></div></div></div></details>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-api">Plugin API<a href="#plugin-api" class="hash-link" aria-label="Direct link to Plugin API" title="Direct link to Plugin API">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="details-5">Details:<a href="#details-5" class="hash-link" aria-label="Direct link to Details:" title="Direct link to Details:">​</a></h4>
<p>This runner exposes a plugin-managed REST-style endpoint. It’s suited for receiving webhooks, serving JSON to the frontend, or integrating with external systems.</p>
<p>Pages will be served from <code>/unmanic/plugin_api/{plugin ID}</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="executed-5">Executed:<a href="#executed-5" class="hash-link" aria-label="Direct link to Executed:" title="Direct link to Executed:">​</a></h4>
<p>From front-end URL</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-5">Function:<a href="#function-5" class="hash-link" aria-label="Direct link to Function:" title="Direct link to Function:">​</a></h4>
<p><code>render_plugin_api(data)</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="provided-data-5">Provided data:<a href="#provided-data-5" class="hash-link" aria-label="Direct link to Provided data:" title="Direct link to Provided data:">​</a></h4>
<ul>
<li><strong><code>content_type</code></strong> <em>[string]</em> - The content type to be set when writing back to the browser.</li>
<li><strong><code>content</code></strong> <em>[dictionary]</em> - The content to print to the browser.</li>
<li><strong><code>status</code></strong> <em>[integer]</em> - The HTTP status code for the response.</li>
<li><strong><code>method</code></strong> <em>[string]</em> - The request method.</li>
<li><strong><code>path</code></strong> <em>[string]</em> - The path received after the &#x27;/unmanic/panel&#x27; path.</li>
<li><strong><code>uri</code></strong> <em>[string]</em> - The request uri.</li>
<li><strong><code>query</code></strong> <em>[string]</em> - The request query.</li>
<li><strong><code>arguments</code></strong> <em>[dictionary]</em> - A dictionary of GET arguments received.</li>
<li><strong><code>body</code></strong> <em>[dictionary]</em> - A dictionary of body arguments received.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-5">Example:<a href="#example-5" class="hash-link" aria-label="Direct link to Example:" title="Direct link to Example:">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>plugin.py</summary><div><div class="collapsibleContent_i85q"><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render_plugin_api</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Runner function - display a custom data panel in the frontend.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    The &#x27;data&#x27; object argument includes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        content_type                    - The content type to be set when writing back to the browser.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        content                         - The content to print to the browser.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        status                          - The HTTP status code for the response.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        method                          - The request method.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        path                            - The path received after the &#x27;/unmanic/panel&#x27; path.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        uri                             - The request uri.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        query                           - The request query.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        arguments                       - A dictionary of GET arguments received.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        body                            - A dictionary of body arguments received.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    :param data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    :return:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Store webhook content</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    settings </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Settings</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    profile_directory </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_profile_directory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time_now </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request_body </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;body&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{}&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> </span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">profile_directory</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;sonarr_webhook_{}.json&#x27;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">time_now</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;w&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> outfile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dump</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request_body</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> outfile</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> indent</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><br></span></code></pre></div></div></div></div></details>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="events">Events<a href="#events" class="hash-link" aria-label="Direct link to Events" title="Direct link to Events">​</a></h2>
<p>Events plugins emit structured data at key moments in a task’s lifecycle (queueing, scheduling, worker start/finish, postprocessor start/finish, library scan complete, etc.). They’re ideal for <strong>observability and orchestration</strong>: push webhooks/metrics, mirror state to dashboards, audit task flow, or trigger downstream automations. Events runners don’t change how work is done; they <strong>report</strong> and enable external systems to react in real time.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="file-queued">File queued<a href="#file-queued" class="hash-link" aria-label="Direct link to File queued" title="Direct link to File queued">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="details-6">Details:<a href="#details-6" class="hash-link" aria-label="Direct link to Details:" title="Direct link to Details:">​</a></h4>
<p>Emitted when a file passes library tests and is added to the pending queue. Useful for logging, triggering alerts, or updating external systems that monitor incoming workload.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="executed-6">Executed:<a href="#executed-6" class="hash-link" aria-label="Direct link to Executed:" title="Direct link to Executed:">​</a></h4>
<p>When a file has been tested and marked to be added to the pending task queue.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-6">Function:<a href="#function-6" class="hash-link" aria-label="Direct link to Function:" title="Direct link to Function:">​</a></h4>
<p><code>emit_file_queued(data)</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="provided-data-6">Provided data:<a href="#provided-data-6" class="hash-link" aria-label="Direct link to Provided data:" title="Direct link to Provided data:">​</a></h4>
<ul>
<li><strong><code>library_id</code></strong> <em>[integer]</em> - The ID of the library that the current task is associated with.</li>
<li><strong><code>file_path</code></strong> <em>[string]</em> - The full path to the file being queued.</li>
<li><strong><code>priority_score</code></strong> <em>[integer]</em> - The priority score assigned to this task.</li>
<li><strong><code>issues</code></strong> <em>[list]</em> - Any file issues that were raised.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-queued">Task queued<a href="#task-queued" class="hash-link" aria-label="Direct link to Task queued" title="Direct link to Task queued">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="details-7">Details:<a href="#details-7" class="hash-link" aria-label="Direct link to Details:" title="Direct link to Details:">​</a></h4>
<p>Emitted when a task object is created and added to the execution queue. This is a good place to notify external systems that work has officially been scheduled.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="executed-7">Executed:<a href="#executed-7" class="hash-link" aria-label="Direct link to Executed:" title="Direct link to Executed:">​</a></h4>
<p>When a task is created and added to the execution queue.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-7">Function:<a href="#function-7" class="hash-link" aria-label="Direct link to Function:" title="Direct link to Function:">​</a></h4>
<p><code>emit_task_queued(data)</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="provided-data-7">Provided data:<a href="#provided-data-7" class="hash-link" aria-label="Direct link to Provided data:" title="Direct link to Provided data:">​</a></h4>
<ul>
<li><strong><code>library_id</code></strong> <em>[integer]</em> - The ID of the library that the current task is associated with.</li>
<li><strong><code>task_id</code></strong> <em>[integer]</em> - A unique identifier of the task.</li>
<li><strong><code>task_type</code></strong> <em>[string]</em> - Indicates how this task is being processed (&quot;local&quot; or &quot;remote&quot;).</li>
<li><strong><code>source_data</code></strong> <em>[dictionary]</em> - Information about the source file for the task.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-scheduled">Task scheduled<a href="#task-scheduled" class="hash-link" aria-label="Direct link to Task scheduled" title="Direct link to Task scheduled">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="details-8">Details:<a href="#details-8" class="hash-link" aria-label="Direct link to Details:" title="Direct link to Details:">​</a></h4>
<p>Emitted once a task is assigned to run locally or remotely. Useful for tracking distribution of tasks across workers or monitoring scheduling latency.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="executed-8">Executed:<a href="#executed-8" class="hash-link" aria-label="Direct link to Executed:" title="Direct link to Executed:">​</a></h4>
<p>When a task is scheduled for execution.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-8">Function:<a href="#function-8" class="hash-link" aria-label="Direct link to Function:" title="Direct link to Function:">​</a></h4>
<p><code>emit_task_scheduled(data)</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="provided-data-8">Provided data:<a href="#provided-data-8" class="hash-link" aria-label="Direct link to Provided data:" title="Direct link to Provided data:">​</a></h4>
<ul>
<li><strong><code>library_id</code></strong> <em>[integer]</em> - The ID of the library that the current task is associated with.</li>
<li><strong><code>task_id</code></strong> <em>[integer]</em> - A unique identifier of the task.</li>
<li><strong><code>task_type</code></strong> <em>[string]</em> - Indicates how this task is being processed (&quot;local&quot; or &quot;remote&quot;).</li>
<li><strong><code>task_schedule_type</code></strong> <em>[string]</em> - Will tell where the task was scheduled either &quot;local&quot; or &quot;remote&quot;.</li>
<li><strong><code>remote_installation_info</code></strong> <em>[dictionary]</em> - Information about the remote installation for a given task. Empty for local tasks.</li>
<li><strong><code>source_data</code></strong> <em>[dictionary]</em> - Information about the source file for the task.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="worker-process-started">Worker process started<a href="#worker-process-started" class="hash-link" aria-label="Direct link to Worker process started" title="Direct link to Worker process started">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="details-9">Details:<a href="#details-9" class="hash-link" aria-label="Direct link to Details:" title="Direct link to Details:">​</a></h4>
<p>Emitted as soon as a worker begins processing. Use it to track active tasks, allocate monitoring resources, or update external dashboards.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="executed-9">Executed:<a href="#executed-9" class="hash-link" aria-label="Direct link to Executed:" title="Direct link to Executed:">​</a></h4>
<p>At the very start of a worker processing a task.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-9">Function:<a href="#function-9" class="hash-link" aria-label="Direct link to Function:" title="Direct link to Function:">​</a></h4>
<p><code>emit_worker_process_started(data)</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="provided-data-9">Provided data:<a href="#provided-data-9" class="hash-link" aria-label="Direct link to Provided data:" title="Direct link to Provided data:">​</a></h4>
<ul>
<li><strong><code>library_id</code></strong> <em>[integer]</em> - The ID of the library that the current task is associated with.</li>
<li><strong><code>task_type</code></strong> <em>[string]</em> - Indicates how this task is being processed (&quot;local&quot; or &quot;remote&quot;).</li>
<li><strong><code>original_file_path</code></strong> <em>[string]</em> - String, absolute path to the original source file.</li>
<li><strong><code>task_cache_path</code></strong> <em>[string]</em> - String, the target cache path for this task.</li>
<li><strong><code>worker_runners_info</code></strong> <em>[dictionary]</em> - Dict, per-runner metadata with initial status (&quot;pending&quot;) and success (False).</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="worker-process-complete">Worker process complete<a href="#worker-process-complete" class="hash-link" aria-label="Direct link to Worker process complete" title="Direct link to Worker process complete">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="details-10">Details:<a href="#details-10" class="hash-link" aria-label="Direct link to Details:" title="Direct link to Details:">​</a></h4>
<p>Emitted once a worker completes processing. It provides the success status, log, and metadata. Use this to record results, calculate processing times, or trigger alerts for failures.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="executed-10">Executed:<a href="#executed-10" class="hash-link" aria-label="Direct link to Executed:" title="Direct link to Executed:">​</a></h4>
<p>When a worker finishes processing a task.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-10">Function:<a href="#function-10" class="hash-link" aria-label="Direct link to Function:" title="Direct link to Function:">​</a></h4>
<p><code>emit_worker_process_complete(data)</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="provided-data-10">Provided data:<a href="#provided-data-10" class="hash-link" aria-label="Direct link to Provided data:" title="Direct link to Provided data:">​</a></h4>
<ul>
<li><strong><code>library_id</code></strong> <em>[integer]</em> - The ID of the library that the current task is associated with.</li>
<li><strong><code>task_type</code></strong> <em>[string]</em> - Indicates how this task is being processed (&quot;local&quot; or &quot;remote&quot;).</li>
<li><strong><code>original_file_path</code></strong> <em>[string]</em> - String, absolute path to the original source file.</li>
<li><strong><code>final_cache_path</code></strong> <em>[string]</em> - String, path to the final cache file location.</li>
<li><strong><code>overall_success</code></strong> <em>[boolean]</em> - Boolean, True if all processing completed successfully.</li>
<li><strong><code>worker_runners_info</code></strong> <em>[dictionary]</em> - Dict, per-runner metadata including status and success.</li>
<li><strong><code>worker_log</code></strong> <em>[list]</em> - The log lines that are being tailed by the frontend. Can be left empty.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="postprocessor-started">Postprocessor started<a href="#postprocessor-started" class="hash-link" aria-label="Direct link to Postprocessor started" title="Direct link to Postprocessor started">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="details-11">Details:<a href="#details-11" class="hash-link" aria-label="Direct link to Details:" title="Direct link to Details:">​</a></h4>
<p>Emitted when the postprocessor begins handling a task. This event is useful for systems that want to track the full lifecycle from processing to file placement.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="executed-11">Executed:<a href="#executed-11" class="hash-link" aria-label="Direct link to Executed:" title="Direct link to Executed:">​</a></h4>
<p>When the post-processor picks up a task.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-11">Function:<a href="#function-11" class="hash-link" aria-label="Direct link to Function:" title="Direct link to Function:">​</a></h4>
<p><code>emit_postprocessor_started(data)</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="provided-data-11">Provided data:<a href="#provided-data-11" class="hash-link" aria-label="Direct link to Provided data:" title="Direct link to Provided data:">​</a></h4>
<ul>
<li><strong><code>library_id</code></strong> <em>[integer]</em> - The ID of the library that the current task is associated with.</li>
<li><strong><code>task_id</code></strong> <em>[integer]</em> - A unique identifier of the task.</li>
<li><strong><code>task_type</code></strong> <em>[string]</em> - Indicates how this task is being processed (&quot;local&quot; or &quot;remote&quot;).</li>
<li><strong><code>cache_path</code></strong> <em>[string]</em> - String, path to the task’s cache file.</li>
<li><strong><code>source_data</code></strong> <em>[dictionary]</em> - Information about the source file for the task.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="postprocessor-complete">Postprocessor complete<a href="#postprocessor-complete" class="hash-link" aria-label="Direct link to Postprocessor complete" title="Direct link to Postprocessor complete">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="details-12">Details:<a href="#details-12" class="hash-link" aria-label="Direct link to Details:" title="Direct link to Details:">​</a></h4>
<p>Emitted after a task has been fully processed and logged in history. It’s useful for auditing, syncing results to external databases, or triggering downstream workflows.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="executed-12">Executed:<a href="#executed-12" class="hash-link" aria-label="Direct link to Executed:" title="Direct link to Executed:">​</a></h4>
<p>After a task is fully post-processed and recorded in history.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-12">Function:<a href="#function-12" class="hash-link" aria-label="Direct link to Function:" title="Direct link to Function:">​</a></h4>
<p><code>emit_postprocessor_complete(data)</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="provided-data-12">Provided data:<a href="#provided-data-12" class="hash-link" aria-label="Direct link to Provided data:" title="Direct link to Provided data:">​</a></h4>
<ul>
<li><strong><code>library_id</code></strong> <em>[integer]</em> - The ID of the library that the current task is associated with.</li>
<li><strong><code>task_id</code></strong> <em>[integer]</em> - A unique identifier of the task.</li>
<li><strong><code>task_type</code></strong> <em>[string]</em> - Indicates how this task is being processed (&quot;local&quot; or &quot;remote&quot;).</li>
<li><strong><code>source_data</code></strong> <em>[dictionary]</em> - Information about the source file for the task.</li>
<li><strong><code>destination_data</code></strong> <em>[dictionary]</em> - Information about the final output file after postprocessing for the task.</li>
<li><strong><code>task_success</code></strong> <em>[boolean]</em> - True if the task succeeded.</li>
<li><strong><code>start_time</code></strong> <em>[float]</em> - UNIX timestamp when the task began.</li>
<li><strong><code>finish_time</code></strong> <em>[float]</em> - UNIX timestamp when the task completed.</li>
<li><strong><code>processed_by_worker</code></strong> <em>[string]</em> - String, identifier of the worker that processed it.</li>
<li><strong><code>log</code></strong> <em>[string]</em> - String, full text of the task log.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scan-complete">Scan complete<a href="#scan-complete" class="hash-link" aria-label="Direct link to Scan complete" title="Direct link to Scan complete">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="details-13">Details:<a href="#details-13" class="hash-link" aria-label="Direct link to Details:" title="Direct link to Details:">​</a></h4>
<p>Emitted whenever a library scan finishes. This can be used to record scan stats, update UI elements, or notify external systems that the library is in sync.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="executed-13">Executed:<a href="#executed-13" class="hash-link" aria-label="Direct link to Executed:" title="Direct link to Executed:">​</a></h4>
<p>After a library scan completes.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-13">Function:<a href="#function-13" class="hash-link" aria-label="Direct link to Function:" title="Direct link to Function:">​</a></h4>
<p><code>emit_scan_complete(data)</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="provided-data-13">Provided data:<a href="#provided-data-13" class="hash-link" aria-label="Direct link to Provided data:" title="Direct link to Provided data:">​</a></h4>
<ul>
<li><strong><code>library_id</code></strong> <em>[integer]</em> - The ID of the library that the current task is associated with.</li>
<li><strong><code>library_name</code></strong> <em>[string]</em> - String, the human-readable name of the library.</li>
<li><strong><code>library_path</code></strong> <em>[string]</em> - String, filesystem path to the library.</li>
<li><strong><code>scan_start_time</code></strong> <em>[float]</em> - Float, UNIX timestamp when the scan started.</li>
<li><strong><code>scan_end_time</code></strong> <em>[float]</em> - Float, UNIX timestamp when the scan ended.</li>
<li><strong><code>scan_duration</code></strong> <em>[float]</em> - Float, duration of the scan in seconds.</li>
<li><strong><code>files_scanned_count</code></strong> <em>[integer]</em> - Integer, total number of files scanned.</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/development/writing_plugins/system_info"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Accessing System Info</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/development/plugin_repos/creating_your_own_repo"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Creating Your Own Repository</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#library-management" class="table-of-contents__link toc-highlight">Library Management</a><ul><li><a href="#file-test" class="table-of-contents__link toc-highlight">File Test</a></li></ul></li><li><a href="#worker" class="table-of-contents__link toc-highlight">Worker</a><ul><li><a href="#process-file" class="table-of-contents__link toc-highlight">Process File</a></li></ul></li><li><a href="#post-processor" class="table-of-contents__link toc-highlight">Post-processor</a><ul><li><a href="#file-movement" class="table-of-contents__link toc-highlight">File movement</a></li><li><a href="#task-result" class="table-of-contents__link toc-highlight">Task Result</a></li></ul></li><li><a href="#frontend" class="table-of-contents__link toc-highlight">Frontend</a><ul><li><a href="#data-panel" class="table-of-contents__link toc-highlight">Data Panel</a></li><li><a href="#plugin-api" class="table-of-contents__link toc-highlight">Plugin API</a></li></ul></li><li><a href="#events" class="table-of-contents__link toc-highlight">Events</a><ul><li><a href="#file-queued" class="table-of-contents__link toc-highlight">File queued</a></li><li><a href="#task-queued" class="table-of-contents__link toc-highlight">Task queued</a></li><li><a href="#task-scheduled" class="table-of-contents__link toc-highlight">Task scheduled</a></li><li><a href="#worker-process-started" class="table-of-contents__link toc-highlight">Worker process started</a></li><li><a href="#worker-process-complete" class="table-of-contents__link toc-highlight">Worker process complete</a></li><li><a href="#postprocessor-started" class="table-of-contents__link toc-highlight">Postprocessor started</a></li><li><a href="#postprocessor-complete" class="table-of-contents__link toc-highlight">Postprocessor complete</a></li><li><a href="#scan-complete" class="table-of-contents__link toc-highlight">Scan complete</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/">Getting Started</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://unmanic.app/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/jsunnex" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Unmanic" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Josh Sunnex. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>